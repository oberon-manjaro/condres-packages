From 150e02c0a05b99d9614b4a2f766a4c61c792087c Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Tue, 6 Sep 2016 15:58:34 +0100
Subject: [PATCH 1/7] gtk3

---
 usr/lib/linuxmint/mintMenu/capi.py                 |  36 -----
 usr/lib/linuxmint/mintMenu/keybinding.py           |  26 +---
 usr/lib/linuxmint/mintMenu/mintMenu.py             | 148 ++++++++++-----------
 usr/lib/linuxmint/mintMenu/mintMenuConfig.py       |  52 +++-----
 usr/lib/linuxmint/mintMenu/plugins/applications.py | 114 ++++++----------
 usr/lib/linuxmint/mintMenu/plugins/easybuttons.py  |  27 ++--
 usr/lib/linuxmint/mintMenu/plugins/execute.py      |   2 +-
 usr/lib/linuxmint/mintMenu/plugins/places.py       |   5 +-
 usr/lib/linuxmint/mintMenu/plugins/recent.py       |  11 +-
 .../mintMenu/plugins/system_management.py          |   2 +-
 usr/lib/linuxmint/mintMenu/pointerMonitor.py       |   5 +-
 11 files changed, 164 insertions(+), 264 deletions(-)
 delete mode 100644 usr/lib/linuxmint/mintMenu/capi.py

diff --git a/usr/lib/linuxmint/mintMenu/capi.py b/usr/lib/linuxmint/mintMenu/capi.py
deleted file mode 100644
index d4e2c44..0000000
--- a/usr/lib/linuxmint/mintMenu/capi.py
+++ /dev/null
@@ -1,36 +0,0 @@
-#!/usr/bin/python2
-
-import gi
-import ctypes
-from ctypes import *
-
-libgobject = CDLL('libgobject-2.0.so.0')
-
-class _PyGObject_Functions(ctypes.Structure):
-   _fields_ = [
-       ('register_class',
-        ctypes.PYFUNCTYPE(ctypes.c_void_p, ctypes.c_char_p,
-                          ctypes.c_int, ctypes.py_object,
-                          ctypes.py_object)),
-       ('register_wrapper',
-        ctypes.PYFUNCTYPE(ctypes.c_void_p, ctypes.py_object)),
-       ('lookup_class',
-        ctypes.PYFUNCTYPE(ctypes.py_object, ctypes.c_int)),
-       ('newgobj',
-        ctypes.PYFUNCTYPE(ctypes.py_object, ctypes.c_void_p)),
-       ]
-
-class PyGObjectCPAI(object):
-    def __init__(self):
-        PyCObject_AsVoidPtr = ctypes.pythonapi.PyCObject_AsVoidPtr
-        PyCObject_AsVoidPtr.restype = ctypes.c_void_p
-        PyCObject_AsVoidPtr.argtypes = [ctypes.py_object]
-        addr = PyCObject_AsVoidPtr(ctypes.py_object(
-           gi._gobject._PyGObject_API))
-        self._api = _PyGObject_Functions.from_address(addr)
-
-    def pygobject_new(self, addr):
-        return self._api.newgobj(addr)
-
-def get_widget(ptr):
-    return PyGObjectCPAI().pygobject_new(ptr)
diff --git a/usr/lib/linuxmint/mintMenu/keybinding.py b/usr/lib/linuxmint/mintMenu/keybinding.py
index dbc44f3..f7cbd1d 100644
--- a/usr/lib/linuxmint/mintMenu/keybinding.py
+++ b/usr/lib/linuxmint/mintMenu/keybinding.py
@@ -25,18 +25,14 @@
 # DEALINGS IN THE SOFTWARE.
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from Xlib.display import Display
 from Xlib import X, error
-from gi.repository import Gtk, Gdk, GObject, GLib
+from gi.repository import Gtk, Gdk, GdkX11, GObject, GLib
 import threading
 import ctypes
 from ctypes import *
-import capi
-
-gdk = CDLL("libgdk-x11-2.0.so.0")
-gtk = CDLL("libgtk-x11-2.0.so.0")
 
 SPECIAL_MODS = (["Super_L",    "<Super>"],
                 ["Super_R",    "<Super>"],
@@ -57,8 +53,7 @@ def __init__(self):
         threading.Thread.__init__ (self)
         self.setDaemon (True)
 
-        gdk.gdk_keymap_get_default.restype = c_void_p
-        self.keymap = capi.get_widget (gdk.gdk_keymap_get_default())
+        self.keymap = Gdk.Keymap().get_default()
         self.display = Display()
         self.screen = self.display.screen()
         self.window = self.screen.root
@@ -90,12 +85,7 @@ def map_modifiers(self):
                 self.known_modifiers_mask |= modifier
 
     def get_keycode(self, keyval):
-        count = c_int()
-        array = (KeymapKey * 10)()
-        keys = cast(array, POINTER(KeymapKey))
-        gdk.gdk_keymap_get_entries_for_keyval.argtypes = [c_void_p, c_uint, c_void_p, c_void_p]
-        gdk.gdk_keymap_get_entries_for_keyval(hash(self.keymap), keyval, byref(keys), byref(count))
-        return keys[0].keycode
+        return self.keymap.get_entries_for_keyval(keyval).keys[0].keycode
 
     def grab(self, key):
         accelerator = key
@@ -137,8 +127,7 @@ def set_focus_window(self, window = None):
         if window is None:
             self.window = self.screen.root
         else:
-            gdk.gdk_x11_drawable_get_xid.argtypes = [c_void_p]
-            self.window = self.display.create_resource_object("window", gdk.gdk_x11_drawable_get_xid(hash(window)))
+            self.window = self.display.create_resource_object("window", window.get_xid())
         self.grab(self.keytext)
 
     def get_mask_combinations(self, mask):
@@ -185,7 +174,7 @@ class KeymapKey(Structure):
                 ("group", c_int),
                 ("level", c_int)]
 
-class KeybindingWidget(Gtk.HBox):
+class KeybindingWidget(Gtk.Box):
     __gsignals__ = {
         'accel-edited': (GObject.SignalFlags.RUN_LAST, None, ()),
     }
@@ -235,8 +224,7 @@ def on_key_release(self, widget, event):
             self.set_button_text()
             self.emit("accel-edited")
             return True
-        gtk.gtk_accelerator_name.restype = c_char_p
-        accel_string = gtk.gtk_accelerator_name(event.keyval, event.state)
+        accel_string = Gtk.accelerator_name( event.keyval, event.state )
         accel_string = self.sanitize(accel_string)
         self.value = accel_string
         self.set_button_text()
diff --git a/usr/lib/linuxmint/mintMenu/mintMenu.py b/usr/lib/linuxmint/mintMenu/mintMenu.py
index 0945e4d..a0d41c4 100755
--- a/usr/lib/linuxmint/mintMenu/mintMenu.py
+++ b/usr/lib/linuxmint/mintMenu/mintMenu.py
@@ -1,7 +1,7 @@
 #!/usr/bin/python2
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 gi.require_version('MatePanelApplet', '4.0')
 from gi.repository import Gtk, GdkPixbuf, Gdk, GObject
 from gi.repository import MatePanelApplet
@@ -26,8 +26,6 @@
 
 GObject.threads_init()
 
-gdk = CDLL("libgdk-x11-2.0.so.0")
-
 # Rename the process
 architecture = commands.getoutput("uname -a")
 if (architecture.find("x86_64") >= 0):
@@ -77,7 +75,7 @@ def __init__( self, toggleButton, settings, keybinder ):
         builder.add_from_file(os.path.join( self.path, "mintMenu.glade" ))
         self.window     = builder.get_object( "mainWindow" )
         self.window.realize()
-        self.window.window.set_decorations(Gdk.WMDecoration.BORDER)
+        self.window.get_window().set_decorations(Gdk.WMDecoration.BORDER)
         self.window.set_title("")
         self.paneholder = builder.get_object( "paneholder" )
         self.border     = builder.get_object( "border" )
@@ -111,11 +109,11 @@ def __init__( self, toggleButton, settings, keybinder ):
 
         self.getSetGSettingEntries()
 
-        self.tooltips = Gtk.Tooltips()
+        self.tooltipsWidgets = []
         if self.globalEnableTooltips and self.enableTooltips:
-            self.tooltips.enable()
+            self.tooltipsEnable()
         else:
-            self.tooltips.disable()
+            self.tooltipsEnable( False )
 
         self.PopulatePlugins();
         self.firstTime = True;
@@ -137,9 +135,9 @@ def toggleTooltipsEnabled( self, settings, key, args = None):
             self.enableTooltips = settings.get_boolean(key)
 
         if self.globalEnableTooltips and self.enableTooltips:
-            self.tooltips.enable()
+            self.tooltipsEnable()
         else:
-            self.tooltips.disable()
+            self.tooltipsEnable( False )
 
     def toggleStartWithFavorites( self, settings, key, args = None ):
         self.startWithFavorites = settings.get_boolean(key)
@@ -179,12 +177,18 @@ def getSetGSettingEntries( self ):
 
         self.globalEnableTooltips = self.panelSettings.get_boolean( "tooltips-enabled" )
 
-    def SetupMintMenuBorder( self, defaultStyle = None ):
+    def SetupMintMenuBorder( self ):
+        context = self.window.get_style_context()
+        context.save()
+        context.set_state( Gtk.StateFlags.NORMAL )
         if self.usecustomcolor:
-            self.window.modify_bg( Gtk.StateType.NORMAL, Gdk.color_parse( self.custombordercolor ) )
-        elif defaultStyle is not None:
-            self.window.modify_bg( Gtk.StateType.NORMAL, defaultStyle.lookup_color('bg_color')[1] )
+            bg_color = Gdk.RGBA()
+            bg_color.parse( self.custombordercolor ) 
+            self.window.override_background_color( Gtk.StateFlags.NORMAL, bg_color )
+        else:
+            self.window.override_background_color( Gtk.StateFlags.NORMAL, None )
         self.border.set_padding( self.borderwidth, self.borderwidth, self.borderwidth, self.borderwidth )
+        context.restore()
 
     def detect_desktop_environment (self):
         self.de = "mate"
@@ -206,7 +210,7 @@ def PopulatePlugins( self ):
         start = time.time()
         PluginPane = Gtk.EventBox()
         PluginPane.show()
-        PaneLadder = Gtk.VBox( False, 0 )
+        PaneLadder = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
         PluginPane.add( PaneLadder )
         ImageBox = Gtk.EventBox()
         ImageBox.show()
@@ -267,7 +271,7 @@ def PopulatePlugins( self ):
                 self.panesToColor.append( MyPlugin.content_holder )
                 MyPlugin.content_holder.show()
 
-                VBox1 = Gtk.VBox( False, 0 )
+                VBox1 = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
                 if MyPlugin.heading != "":
                     Label1 = Gtk.Label(label= MyPlugin.heading )
                     Align1 = Gtk.Alignment.new( 0, 0, 0, 0 )
@@ -283,7 +287,7 @@ def PopulatePlugins( self ):
                         heading.set_visible_window( False )
                         heading.set_size_request( MyPlugin.width, 30 )
                     else:
-                        heading = Gtk.HBox()
+                        heading = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
                         #heading.set_relief( Gtk.ReliefStyle.NONE )
                         heading.set_size_request( MyPlugin.width, -1 )
                         #heading.set_sensitive(False)
@@ -294,14 +298,17 @@ def PopulatePlugins( self ):
                     VBox1.pack_start( heading, False, False, 0 )
                 VBox1.show()
                 #Add plugin to Plugin Box under heading button
-                MyPlugin.content_holder.reparent( VBox1 )
+                MyPlugin.content_holder.get_parent().remove(MyPlugin.content_holder)
+                VBox1.add( MyPlugin.content_holder )
 
                 #Add plugin to main window
                 PaneLadder.pack_start( VBox1 , True, True, 0)
                 PaneLadder.show()
 
-                if MyPlugin.window:
-                    MyPlugin.window.destroy()
+                try:
+                    MyPlugin.get_window().destroy()
+                except AttributeError:
+                    pass
 
                 try:
                     if hasattr( MyPlugin, 'do_plugin' ):
@@ -327,7 +334,7 @@ def PopulatePlugins( self ):
                 self.paneholder.pack_start( ImageBox, False, False, 0 )
                 self.paneholder.pack_start( PluginPane, False, False, 0 )
                 PluginPane = Gtk.EventBox()
-                PaneLadder = Gtk.VBox( False, 0 )
+                PaneLadder = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
                 PluginPane.add( PaneLadder )
                 ImageBox = Gtk.EventBox()
                 self.panesToColor.extend( [ PluginPane, ImageBox ] )
@@ -349,31 +356,25 @@ def PopulatePlugins( self ):
 
         self.paneholder.pack_start( ImageBox, False, False, 0 )
         self.paneholder.pack_start( PluginPane, False, False, 0 )
-        self.tooltips.disable()
-        #print u"Loading", (time.time() - start), "s"
-
-    # A little hacky but works
-    def getDefaultStyle( self ):
-        widget = Gtk.EventBox()
-        widget.show()
-        return Gtk.rc_get_style(widget)
+        self.tooltipsEnable( False ))
 
     def loadTheme( self ):
-        defaultStyle = self.getDefaultStyle()
-        self.SetPaneColors( self.panesToColor, defaultStyle )
-        self.SetupMintMenuBorder( defaultStyle )
+        self.SetPaneColors( self.panesToColor )
+        self.SetupMintMenuBorder()
         self.SetHeadingStyle( self.headingsToColor )
 
-    def SetPaneColors( self, items, defaultStyle = None ):
-        if self.usecustomcolor:
-            for item in items:
-                item.modify_bg( Gtk.StateType.NORMAL, Gdk.color_parse( self.customcolor ) )
-                # TODO: Changing background color isn't working for pixmaps! The following does not work:
-                item.get_style().bg_pixmap[Gtk.StateType.NORMAL] = None
-        elif defaultStyle is not None:
-            for item in items:
-                item.modify_bg( Gtk.StateType.NORMAL, defaultStyle.lookup_color('bg_color')[1] )
-                item.get_style().bg_pixmap[Gtk.StateType.NORMAL] = defaultStyle.bg_pixmap[Gtk.StateType.NORMAL]
+    def SetPaneColors( self, items ):
+        for item in items:
+            context = item.get_style_context()
+            context.save()
+            context.set_state( Gtk.StateFlags.NORMAL )
+            if self.usecustomcolor:
+                bg_color = Gdk.RGBA()
+                bg_color.parse( self.customcolor )
+                item.override_background_color( Gtk.StateFlags.NORMAL, bg_color )
+            else:
+                item.override_background_color( Gtk.StateFlags.NORMAL, None )
+            context.restore()
 
     def SetHeadingStyle( self, items ):
         if self.usecustomcolor:
@@ -390,8 +391,13 @@ def SetHeadingStyle( self, items ):
                 markup = '<span size="12000" weight="bold" color="%s">%s</span>' % (color, text)
             item.set_markup( markup )
 
-    def setTooltip( self, widget, tip, tipPrivate = None ):
-        self.tooltips.set_tip( widget, tip, tipPrivate )
+    def tooltipsEnable( self, enable = True ):
+        for widget in self.tooltipsWidgets:
+            widget.set_has_tooltip( enable )
+
+    def setTooltip( self, widget, tip ):
+        self.tooltipsWidgets.append( widget )
+        widget.set_tooltip_text( tip )
 
     def RegenPlugins( self, *args, **kargs ):
         #print
@@ -435,7 +441,7 @@ def show( self ):
             self.firstTime = False
             self.window.set_opacity(1.0)
 
-        self.window.window.focus( Gdk.CURRENT_TIME )
+        self.window.get_window().focus( Gdk.CURRENT_TIME )
 
         for plugin in self.plugins.values():
             if hasattr( plugin, "onShowMenu" ):
@@ -514,20 +520,18 @@ def __init__( self, applet, iid ):
         self.pointerMonitor.connect("activate", self.onPointerOutside)
 
     def onWindowMap( self, *args ):
-        self.applet.set_state( Gtk.StateType.SELECTED )
-        self.keybinder.set_focus_window( self.mainwin.window.window )
-        #self.pointerMonitor.grabPointer()
+        self.applet.get_style_context().set_state( Gtk.StateFlags.SELECTED )
+        self.keybinder.set_focus_window( self.mainwin.window.get_window() )
         return False
 
     def onWindowUnmap( self, *args ):
-        self.applet.set_state( Gtk.StateType.NORMAL )
+        self.applet.get_style_context().set_state( Gtk.StateFlags.NORMAL )
         self.keybinder.set_focus_window()
-        #self.pointerMonitor.ungrabPointer()
         return False
 
     def onRealize( self, *args):
-        self.pointerMonitor.addWindowToMonitor( self.mainwin.window.window )
-        self.pointerMonitor.addWindowToMonitor( self.applet.window )
+        self.pointerMonitor.addWindowToMonitor( self.mainwin.window.get_window() )
+        self.pointerMonitor.addWindowToMonitor( self.applet.get_window() )
         self.pointerMonitor.start()
         return False
 
@@ -544,8 +548,8 @@ def enter_notify(self, applet, event):
 
     def leave_notify(self, applet, event):
         # Hack for mate-panel-test-applets focus issue (this can be commented)
-        if event.state & Gdk.ModifierType.BUTTON1_MASK and applet.state & Gtk.StateType.SELECTED:
-            if event.x >= 0 and event.y >= 0 and event.x < applet.window.get_width() and event.y < applet.window.get_height():
+        if event.state & Gdk.ModifierType.BUTTON1_MASK and applet.get_style_context().get_state() & Gtk.StateFlags.SELECTED:
+            if event.x >= 0 and event.y >= 0 and event.x < applet.get_window().get_width() and event.y < applet.get_window().get_height():
                 self.mainwin.stopHiding()
 
         self.do_image(self.buttonIcon, False)
@@ -572,19 +576,19 @@ def createPanelButton( self ):
             self.systemlabel.set_tooltip_text(tooltip)
             self.button_icon.set_tooltip_text(tooltip)
         if self.applet.get_orient() == MatePanelApplet.AppletOrient.UP or self.applet.get_orient() == MatePanelApplet.AppletOrient.DOWN:
-            self.button_box = Gtk.HBox()
+            self.button_box = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
             self.button_box.pack_start( self.button_icon, False, False, 0 )
             self.button_box.pack_start( self.systemlabel, False, False, 0 )
             self.button_icon.set_padding( 5, 0 )
         # if we have a vertical panel
         elif self.applet.get_orient() == MatePanelApplet.AppletOrient.LEFT:
-            self.button_box = Gtk.VBox()
+            self.button_box = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
             self.systemlabel.set_angle( 270 )
             self.button_box.pack_start( self.button_icon , False, False, 0)
             self.button_box.pack_start( self.systemlabel , False, False, 0)
             self.button_icon.set_padding( 0, 5 )
-        elif self.applet.get_orient() == MatePanelApplet.AppletOrient.RIGHT:
-            self.button_box = Gtk.VBox()
+        elif self.applet.get_orient( orientation=Gtk.Orientation.VERTICAL ) == MatePanelApplet.AppletOrient.RIGHT:
+            self.button_box = Gtk.Box()
             self.systemlabel.set_angle( 90 )
             self.button_box.pack_start( self.systemlabel , False, False, 0)
             self.button_box.pack_start( self.button_icon , False, False, 0)
@@ -626,17 +630,17 @@ def applyTheme(self):
     def changeOrientation( self, *args, **kargs ):
 
         if self.applet.get_orient() == MatePanelApplet.AppletOrient.UP or self.applet.get_orient() == MatePanelApplet.AppletOrient.DOWN:
-            tmpbox = Gtk.HBox()
+            tmpbox = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
             self.systemlabel.set_angle( 0 )
             self.button_box.reorder_child( self.button_icon, 0 )
             self.button_icon.set_padding( 5, 0 )
         elif self.applet.get_orient() == MatePanelApplet.AppletOrient.LEFT:
-            tmpbox = Gtk.VBox()
+            tmpbox = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
             self.systemlabel.set_angle( 270 )
             self.button_box.reorder_child( self.button_icon, 0 )
             self.button_icon.set_padding( 0, 5 )
         elif self.applet.get_orient() == MatePanelApplet.AppletOrient.RIGHT:
-            tmpbox = Gtk.VBox()
+            tmpbox = Gtk.Box( orientation=Gtk.Orientation.VERTICAL )
             self.systemlabel.set_angle( 90 )
             self.button_box.reorder_child( self.button_icon, 1 )
             self.button_icon.set_padding( 0, 5 )
@@ -688,10 +692,8 @@ def sizeButton( self ):
             self.button_icon.show()
      #   This code calculates width and height for the button_box
      #   and takes the orientation in account
-        sl_req = Gtk.Requisition()
-        bi_req = Gtk.Requisition()
-        self.button_icon.size_request(bi_req)
-        self.systemlabel.size_request(sl_req)
+        bi_req = self.button_icon.size_request()
+        sl_req = self.systemlabel.size_request()
         if self.applet.get_orient() == MatePanelApplet.AppletOrient.UP or self.applet.get_orient() == MatePanelApplet.AppletOrient.DOWN:
             if self.hideIcon:
                 self.applet.set_size_request( sl_req.width + 2, bi_req.height )
@@ -751,7 +753,7 @@ def showMenu( self, widget=None, event=None ):
             self.mainwin.hide()
 
     def toggleMenu( self ):
-        if self.applet.state & Gtk.StateType.SELECTED:
+        if self.applet.get_style_context().get_state() & Gtk.StateFlags.SELECTED:
             self.mainwin.hide()
         else:
             self.positionMenu()
@@ -769,10 +771,8 @@ def positionMenu( self ):
         x = c_int()
         y = c_int()
         # Get the dimensions/position of the widgetToAlignWith
-        gdk.gdk_window_get_origin.argtypes = [c_void_p, c_void_p, c_void_p]
-        gdk.gdk_window_get_origin(hash(self.applet.window), byref(x), byref(y))
-        entryX = x.value
-        entryY = y.value
+        entryX = self.applet.get_window().get_origin().x
+        entryY = self.applet.get_window().get_origin().y
 
         entryWidth, entryHeight =  self.applet.get_allocation().width, self.applet.get_allocation().height
         entryHeight = entryHeight + self.mainwin.offset
@@ -811,17 +811,17 @@ def positionMenu( self ):
 
     # this callback is to create a context menu
     def create_menu(self):
-        action_group = Gtk.ActionGroup("context-menu")
-        action = Gtk.Action("MintMenuPrefs", _("Preferences"), None, "gtk-preferences")
+        action_group = Gtk.ActionGroup(name="context-menu")
+        action = Gtk.Action(name="MintMenuPrefs", label=_("Preferences"), tooltip=None, stock_id="gtk-preferences")
         action.connect("activate", self.showPreferences)
         action_group.add_action(action)
-        action = Gtk.Action("MintMenuEdit", _("Edit menu"), None, "gtk-edit")
+        action = Gtk.Action(name="MintMenuEdit", label=_("Edit menu"), tooltip=None, stock_id="gtk-edit")
         action.connect("activate", self.showMenuEditor)
         action_group.add_action(action)
-        action = Gtk.Action("MintMenuReload", _("Reload plugins"), None, "gtk-refresh")
+        action = Gtk.Action(name="MintMenuReload", label=_("Reload plugins"), tooltip=None, stock_id="gtk-refresh")
         action.connect("activate", self.mainwin.RegenPlugins)
         action_group.add_action(action)
-        action = Gtk.Action("MintMenuAbout", _("About"), None, "gtk-about")
+        action = Gtk.Action(name="MintMenuAbout", label=_("About"), tooltip=None, stock_id="gtk-about")
         action.connect("activate", self.showAboutDialog)
         action_group.add_action(action)
         action_group.set_translation_domain ("mintmenu")
diff --git a/usr/lib/linuxmint/mintMenu/mintMenuConfig.py b/usr/lib/linuxmint/mintMenu/mintMenuConfig.py
index 5e48a8d..40837e4 100755
--- a/usr/lib/linuxmint/mintMenu/mintMenuConfig.py
+++ b/usr/lib/linuxmint/mintMenu/mintMenuConfig.py
@@ -3,7 +3,7 @@
 import sys
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from gi.repository import Gtk, Gdk, GdkPixbuf
 import keybinding
@@ -62,7 +62,7 @@ def __init__( self ):
 
         self.builder.get_object("buttonTextLabel").set_text(_("Button text:"))
         self.builder.get_object("label1").set_text(_("Options"))
-        self.builder.get_object("label23").set_text(_("Applications"))
+        self.builder.get_object("applicationsLabel").set_text(_("Applications"))
 
         self.builder.get_object("colorsLabel").set_text(_("Theme"))
         self.builder.get_object("favLabel").set_text(_("Favorites"))
@@ -141,8 +141,8 @@ def __init__( self ):
         self.showButtonIcon = self.builder.get_object( "showButtonIcon" )
         self.buttonText = self.builder.get_object( "buttonText" )
         self.hotkeyWidget = keybinding.KeybindingWidget(_("Keyboard shortcut:") )
-        table = self.builder.get_object( "main_table" )
-        table.attach(self.hotkeyWidget, 0, 2, 2, 3, Gtk.AttachOptions.FILL, Gtk.AttachOptions.FILL, 0, 0)
+        grid = self.builder.get_object( "main_grid" )
+        grid.attach(self.hotkeyWidget, 0, 2, 2, 1)
         self.buttonIcon = self.builder.get_object( "buttonIcon" )
         self.buttonIconChooser = self.builder.get_object( "button_icon_chooser" )
         self.image_filter = Gtk.FileFilter()
@@ -214,9 +214,9 @@ def __init__( self ):
 
         self.bindGSettingsValueToWidget( self.settings, "int", "border-width", self.borderWidth, "value-changed", self.borderWidth.set_value, self.borderWidth.get_value_as_int )
         self.bindGSettingsValueToWidget( self.settings, "bool", "use-custom-color", self.useCustomColors, "toggled", self.useCustomColors.set_active, self.useCustomColors.get_active )
-        self.bindGSettingsValueToWidget( self.settings, "color", "custom-color", self.backgroundColor, "color-set", self.backgroundColor.set_color, self.getBackgroundColor )
-        self.bindGSettingsValueToWidget( self.settings, "color", "custom-heading-color", self.headingColor, "color-set", self.headingColor.set_color, self.getHeadingColor )
-        self.bindGSettingsValueToWidget( self.settings, "color", "custom-border-color", self.borderColor, "color-set", self.borderColor.set_color, self.getBorderColor )
+        self.bindGSettingsValueToWidget( self.settings, "color", "custom-color", self.backgroundColor, "color-set", self.backgroundColor.set_rgba, self.getBackgroundColor )
+        self.bindGSettingsValueToWidget( self.settings, "color", "custom-heading-color", self.headingColor, "color-set", self.headingColor.set_rgba, self.getHeadingColor )
+        self.bindGSettingsValueToWidget( self.settings, "color", "custom-border-color", self.borderColor, "color-set", self.borderColor.set_rgba, self.getBorderColor )
         self.bindGSettingsValueToWidget( self.settings, "bool", "hide-applet-icon", self.showButtonIcon, "toggled", self.setShowButtonIcon, self.getShowButtonIcon )
         self.bindGSettingsValueToWidget( self.settings, "string", "applet-text", self.buttonText, "changed", self.buttonText.set_text, self.buttonText.get_text )
         self.bindGSettingsValueToWidget( self.settings, "string", "hot-key", self.hotkeyWidget, "accel-edited", self.hotkeyWidget.set_val, self.hotkeyWidget.get_val )
@@ -352,7 +352,9 @@ def getShowButtonIcon( self ):
     def bindGSettingsValueToWidget( self, settings, setting_type, key, widget, changeEvent, setter, getter ):
         settings.notifyAdd( key, self.callSetter, args = [ setting_type, setter ] )
         if setting_type == "color":
-            setter( Gdk.color_parse( settings.get( setting_type, key ) ) )
+            color = Gdk.RGBA()
+            color.parse( settings.get( setting_type, key ) )
+            setter( color )
         else:
             setter( settings.get( setting_type, key ) )
         widget.connect( changeEvent, lambda *args: self.callGetter( settings, setting_type, key, getter ) )
@@ -365,7 +367,9 @@ def callSetter( self, settings, key, args ):
         elif args[0] == "int":
             args[1]( settings.get_int(key) )
         elif args[0] == "color":
-            args[1]( Gdk.color_parse( settings.get_string(key) ) )
+            color = Gdk.RGBA()
+            color.parse( settings.get_string(key) )
+            args[1]( color )
 
     def callGetter( self, settings, setting_type, key, getter ):
         if (setting_type == "int"):
@@ -382,31 +386,19 @@ def toggleUseCustomColors( self, widget ):
         self.headingColorLabel.set_sensitive(  widget.get_active() )
 
     def getBackgroundColor( self ):
-        try:
-            color = self.backgroundColor.get_color()
-        except:
-            color = Gdk.Color(0, 0, 0)
-            self.backgroundColor.get_color(color)
-        return self.gdkColorToString( color )
+        color = self.backgroundColor.get_rgba()
+        return self.gdkRGBAToString( color )
 
     def getBorderColor( self ):
-        try:
-            color = self.borderColor.get_color()
-        except:
-            color = Gdk.Color(0, 0, 0)
-            self.borderColor.get_color(color)
-        return self.gdkColorToString( color )
+        color = self.borderColor.get_rgba()
+        return self.gdkRGBAToString( color )
 
     def getHeadingColor( self ):
-        try:
-            color = self.headingColor.get_color()
-        except:
-            color = Gdk.Color(0, 0, 0)
-            self.headingColor.get_color(color)
-        return self.gdkColorToString( color )
-
-    def gdkColorToString( self, gdkColor ):
-        return "#%.2X%.2X%.2X" % ( gdkColor.red / 256, gdkColor.green / 256, gdkColor.blue / 256 )
+        color = self.headingColor.get_rgba()
+        return self.gdkRGBAToString( color )
+
+    def gdkRGBAToString( self, gdkRGBA ):
+        return "#%.2X%.2X%.2X" % ( gdkRGBA.red * 256, gdkRGBA.green * 256, gdkRGBA.blue * 256 )
 
     def moveUp( self, upButton ):
 
diff --git a/usr/lib/linuxmint/mintMenu/plugins/applications.py b/usr/lib/linuxmint/mintMenu/plugins/applications.py
index 2a927ef..4040da5 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/applications.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/applications.py
@@ -1,7 +1,7 @@
 #!/usr/bin/python2
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from gi.repository import Gtk, Pango, Gdk, Gio, GLib
 
@@ -20,8 +20,6 @@
 from easygsettings import EasyGSettings
 from easyfiles import *
 
-gtk = CDLL("libgtk-x11-2.0.so.0")
-
 import matemenu
 
 from user import home
@@ -122,10 +120,11 @@ def __init__( self, iconName, iconSize, label ):
         self.set_size_request( -1, -1 )
         Align1 = Gtk.Alignment()
         Align1.set( 0, 0.5, 1.0, 0 )
-        HBox1 = Gtk.HBox()
-        labelBox = Gtk.VBox( False, 2 )
+        HBox1 = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
+        labelBox = Gtk.Box( orientation=Gtk.Orientation.VERTICAL, spacing=2 )
         self.image = Gtk.Image()
-        self.image.set_from_stock( self.iconName, iconSize )
+        self.image.set_from_icon_name( self.iconName, Gtk.IconSize.INVALID )
+        self.image.set_pixel_size( iconSize )
         self.image.show()
         HBox1.pack_start( self.image, False, False, 5 )
         self.label = Gtk.Label()
@@ -148,7 +147,7 @@ def set_text( self, text):
         self.label.set_markup(text)
 
     def set_icon_size (self, size):
-        self.image.set_from_stock( self.iconName, size )
+        self.image.set_pixel_size( size )
 
 class TargetEntry(Structure):
     _fields_ = [("target", c_char_p),
@@ -157,13 +156,10 @@ class TargetEntry(Structure):
 
 class pluginclass( object ):
     TARGET_TYPE_TEXT = 80
-    array2 = TargetEntry * 2
-    toButton = array2( ("text/uri-list", 0, TARGET_TYPE_TEXT), ("text/uri-list", 0, TARGET_TYPE_TEXT) )
+    toButton = ( Gtk.TargetEntry.new( "text/uri-list", 0, TARGET_TYPE_TEXT ), Gtk.TargetEntry.new( "text/uri-list", 0, TARGET_TYPE_TEXT ) )
     TARGET_TYPE_FAV = 81
-    array = TargetEntry * 3
-    toFav = array( ( "FAVORITES", Gtk.TargetFlags.SAME_APP, 81 ), ( "text/plain", 0, 100 ), ( "text/uri-list", 0, 101 ) )
-    array1 = TargetEntry * 2
-    fromFav = array1( ("FAVORITES", Gtk.TargetFlags.SAME_APP, 81), ("FAVORITES", Gtk.TargetFlags.SAME_APP, 81) )
+    toFav = ( Gtk.TargetEntry.new( "FAVORITES", Gtk.TargetFlags.SAME_APP, 81 ), Gtk.TargetEntry.new( "text/plain", 0, 100 ), Gtk.TargetEntry.new( "text/uri-list", 0, 101 ) )
+    fromFav = ( Gtk.TargetEntry.new( "FAVORITES", Gtk.TargetFlags.SAME_APP, 81 ), Gtk.TargetEntry.new( "FAVORITES", Gtk.TargetFlags.SAME_APP, 81 ) )
 
     @print_timing
     def __init__( self, mintMenuWin, toggleButton, de ):
@@ -221,10 +217,9 @@ def __init__( self, mintMenuWin, toggleButton, de ):
 
         self.favoritesBox.connect( "drag-data-received", self.ReceiveCallback )
 
-        gtk.gtk_drag_dest_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-        gtk.gtk_drag_dest_set ( hash(self.favoritesBox), Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP,  self.toButton, 2, Gdk.DragAction.COPY )
+        self.favoritesBox.drag_dest_set ( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP,  self.toButton, Gdk.DragAction.COPY )
         self.showFavoritesButton.connect( "drag-data-received", self.ReceiveCallback )
-        gtk.gtk_drag_dest_set ( hash(self.showFavoritesButton), Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toButton, 2, Gdk.DragAction.COPY )
+        self.showFavoritesButton.drag_dest_set ( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toButton, Gdk.DragAction.COPY )
 
        # self.searchButton.connect( "button_release_event", self.SearchWithButton )
         try:
@@ -543,8 +538,7 @@ def focusSearchEntry( self, clear = True ):
         # of the existing text, that's the most likely candidate anyhow
         self.searchEntry.grab_focus()
         if self.rememberFilter or not clear:
-            gtk.gtk_editable_set_position.argtypes = [c_void_p, c_int]
-            gtk.gtk_editable_set_position(hash(self.searchEntry), -1)
+            self.searchEntry.set_position(-1)
         else:
             self.searchEntry.set_text("")
 
@@ -577,14 +571,14 @@ def add_search_suggestions(self, text):
 
         text = "<b>%s</b>" % text
 
-        suggestionButton = SuggestionButton(Gtk.STOCK_ADD, self.iconSize, "")
+        suggestionButton = SuggestionButton("list-add", self.iconSize, "")
         suggestionButton.connect("clicked", self.search_google)
         suggestionButton.set_text(_("Search Google for %s") % text)
         suggestionButton.set_image("/usr/lib/linuxmint/mintMenu/search_engines/google.ico")
         self.applicationsBox.add(suggestionButton)
         self.suggestions.append(suggestionButton)
 
-        suggestionButton = SuggestionButton(Gtk.STOCK_ADD, self.iconSize, "")
+        suggestionButton = SuggestionButton("list-add", self.iconSize, "")
         suggestionButton.connect("clicked", self.search_wikipedia)
         suggestionButton.set_text(_("Search Wikipedia for %s") % text)
         suggestionButton.set_image("/usr/lib/linuxmint/mintMenu/search_engines/wikipedia.ico")
@@ -592,7 +586,7 @@ def add_search_suggestions(self, text):
         self.suggestions.append(suggestionButton)
 
         separator = Gtk.EventBox()
-        separator.add(Gtk.HSeparator())
+        separator.add(Gtk.Separator( orientation=Gtk.Orientation.HORIZONTAL ))
         separator.set_visible_window(False)
         separator.set_size_request(-1, 20)
         separator.type = "separator"
@@ -600,21 +594,21 @@ def add_search_suggestions(self, text):
         self.applicationsBox.add(separator)
         self.suggestions.append(separator)
 
-        suggestionButton = SuggestionButton(Gtk.STOCK_ADD, self.iconSize, "")
+        suggestionButton = SuggestionButton("list-add", self.iconSize, "")
         suggestionButton.connect("clicked", self.search_dictionary)
         suggestionButton.set_text(_("Lookup %s in Dictionary") % text)
         suggestionButton.set_image("/usr/lib/linuxmint/mintMenu/search_engines/dictionary.png")
         self.applicationsBox.add(suggestionButton)
         self.suggestions.append(suggestionButton)
 
-        suggestionButton = SuggestionButton(Gtk.STOCK_FIND, self.iconSize, "")
+        suggestionButton = SuggestionButton("edit-find", self.iconSize, "")
         suggestionButton.connect("clicked", self.Search)
         suggestionButton.set_text(_("Search Computer for %s") % text)
         self.applicationsBox.add(suggestionButton)
         self.suggestions.append(suggestionButton)
 
-        #self.last_separator = gtk.EventBox()
-        #self.last_separator.add(gtk.HSeparator())
+        #self.last_separator = Gtk.EventBox()
+        #self.last_separator.add(Gtk.Separator( orientation=Gtk.Orientation.HORIZONTAL ))
         #self.last_separator.set_size_request(-1, 20)
         #self.last_separator.type = "separator"
         #self.mintMenuWin.SetPaneColors( [  self.last_separator ] )
@@ -846,8 +840,7 @@ def keyPress( self, widget, event ):
 
         if event.string.strip() != "" or event.keyval == Gdk.KEY_BackSpace:
             self.searchEntry.grab_focus()
-            gtk.gtk_editable_set_position.argtypes = [c_void_p, c_int]
-            gtk.gtk_editable_set_position(hash(self.searchEntry), -1)
+            self.searchEntry.set_position( -1 )
             self.searchEntry.event( event )
             return True
 
@@ -917,8 +910,7 @@ def favPopup( self, widget, ev ):
 
                 mTree.show_all()
                 self.mintMenuWin.stopHiding()
-                gtk.gtk_menu_popup.argtypes = [c_void_p, c_void_p, c_void_p, c_void_p, c_void_p, c_uint, c_uint]
-                gtk.gtk_menu_popup(hash(mTree), None, None, None, None, ev.button, ev.time)
+                mTree.popup(None, None, None, None, ev.button, ev.time)
             else:
                 mTree = Gtk.Menu()
                 mTree.set_events(Gdk.EventMask.POINTER_MOTION_MASK | Gdk.EventMask.POINTER_MOTION_HINT_MASK |
@@ -937,8 +929,7 @@ def favPopup( self, widget, ev ):
                 insertSpaceMenuItem.connect( "activate", self.onFavoritesInsertSpace, widget, insertBefore )
                 insertSeparatorMenuItem.connect( "activate", self.onFavoritesInsertSeparator, widget, insertBefore )
                 self.mintMenuWin.stopHiding()
-                gtk.gtk_menu_popup.argtypes = [c_void_p, c_void_p, c_void_p, c_void_p, c_void_p, c_uint, c_uint]
-                gtk.gtk_menu_popup(hash(mTree), None, None, None, None, ev.button, ev.time)
+                mTree.popup(None, None, None, None, ev.button, ev.time)
 
     def menuPopup( self, widget, event ):
         if event.button == 3:
@@ -1000,8 +991,7 @@ def menuPopup( self, widget, event ):
                 startupMenuItem.connect( "toggled", self.onAddToStartup, widget )
 
             self.mintMenuWin.stopHiding()
-            gtk.gtk_menu_popup.argtypes = [c_void_p, c_void_p, c_void_p, c_void_p, c_void_p, c_uint, c_uint]
-            gtk.gtk_menu_popup(hash(mTree), None, None, None, None, event.button, event.time)
+            mTree.popup(None, None, None, None, ev.button, ev.time)
 
 
     def searchPopup( self, widget=None, event=None ):
@@ -1033,7 +1023,8 @@ def searchPopup( self, widget=None, event=None ):
 
         menuItem = Gtk.ImageMenuItem(_("Search Computer"))
         img = Gtk.Image()
-        img.set_from_stock(Gtk.STOCK_FIND, self.iconSize)
+        img.set_from_icon_name("edit-find", Gtk.IconSize.INVALID)
+        img.set_pixel_size( self.iconSize )
         menuItem.set_image(img)
         menuItem.connect("activate", self.Search)
         menu.append(menuItem)
@@ -1079,8 +1070,7 @@ def searchPopup( self, widget=None, event=None ):
         menu.show_all()
 
         self.mintMenuWin.stopHiding()
-        gtk.gtk_menu_popup.argtypes = [c_void_p, c_void_p, c_void_p, c_void_p, c_void_p, c_uint, c_uint]
-        gtk.gtk_menu_popup(hash(menu), None, None, None, None, event.button, event.time)
+        menu.popup(None, None, None, None, event.button, event.time)
 
         #menu.attach_to_widget(self.searchButton, None)
         #menu.reposition()
@@ -1290,11 +1280,11 @@ def do_plugin( self ):
 
     # Scroll button into view
     def scrollItemIntoView( self, widget, event = None ):
-        viewport = widget.parent
+        viewport = widget.get_parent()
         while not isinstance( viewport, Gtk.Viewport ):
-            if not viewport.parent:
+            if not viewport.get_parent():
                 return
-            viewport = viewport.parent
+            viewport = viewport.get_parent()
         aloc = widget.get_allocation()
         viewport.get_vadjustment().clamp_page(aloc.y, aloc.y + aloc.height)
 
@@ -1310,8 +1300,9 @@ def favoritesBuildSpace( self ):
         return space
 
     def favoritesBuildSeparator( self ):
-        separator = Gtk.HSeparator()
-        separator.set_size_request( -1, 20 )
+        separator = Gtk.Separator( orientation=Gtk.Orientation.HORIZONTAL )
+        separator.set_margin_top( 5 )
+        separator.set_margin_bottom( 5 )
         separator.type = "separator"
 
         separator.show_all()
@@ -1406,34 +1397,15 @@ def buildFavorites( self ):
                     self.favorites.append( favButton )
                     self.favoritesPositionOnGrid( favButton )
                     favButton.connect( "drag-data-received", self.onFavButtonDragReorder )
-                    gtk.gtk_drag_dest_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-                    gtk.gtk_drag_dest_set( hash(favButton), Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.fromFav, 2, Gdk.DragAction.COPY )
+                    favButton.drag_dest_set( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toFav, Gdk.DragAction.COPY 
                     favButton.connect( "drag-data-get", self.onFavButtonDragReorderGet )
-                    gtk.gtk_drag_source_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-                    gtk.gtk_drag_source_set( hash(favButton), Gdk.ModifierType.BUTTON1_MASK, self.toFav, 3, Gdk.DragAction.COPY )
+                    favButton.drag_source_set ( Gdk.ModifierType.BUTTON1_MASK, self.toFav, Gdk.DragAction.COPY )
                     position += 1
 
             self.favoritesSave()
         except Exception, e:
             print e
 
-    def favoritesGetNumRows( self ):
-        rows = 0
-        col = 0
-        for fav in self.favorites:
-            if  ( fav.type == "separator" or fav.type == "space" ) and col != 0:
-                rows += 1
-                col = 0
-            col += 1
-            if  fav.type == "separator" or fav.type == "space":
-                rows += 1
-                col = 0
-
-            if col >= self.favCols:
-                rows += 1
-                col = 0
-        return rows
-
     def favoritesPositionOnGrid( self, favorite ):
         row = 0
         col = 0
@@ -1453,9 +1425,9 @@ def favoritesPositionOnGrid( self, favorite ):
                 col = 0
 
         if favorite.type == "separator" or favorite.type == "space":
-            self.favoritesBox.attach( favorite, col, col + self.favCols, row, row + 1, yoptions = 0 )
+            self.favoritesBox.attach( favorite, col, row, self.favCols, 1 )
         else:
-            self.favoritesBox.attach( favorite, col, col + 1, row, row + 1, yoptions = 0 )
+            self.favoritesBox.attach( favorite, col, row, 1, 1 )
 
     def favoritesReorder( self, oldposition, newposition ):
         if oldposition == newposition:
@@ -1479,7 +1451,6 @@ def favoritesReorder( self, oldposition, newposition ):
             self.favoritesPositionOnGrid( fav )
 
         self.favoritesSave()
-        self.favoritesBox.resize( self.favoritesGetNumRows(), self.favCols )
 
     def favoritesAdd( self, favButton, position = -1 ):
         if favButton:
@@ -1488,11 +1459,9 @@ def favoritesAdd( self, favButton, position = -1 ):
             self.favoritesPositionOnGrid( favButton )
 
             favButton.connect( "drag-data-received", self.onFavButtonDragReorder )
-            gtk.gtk_drag_dest_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-            gtk.gtk_drag_dest_set( hash(favButton), Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toFav, 3, Gdk.DragAction.COPY )
+            favButton.drag_dest_set( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toFav, Gdk.DragAction.COPY )
             favButton.connect( "drag-data-get", self.onFavButtonDragReorderGet )
-            gtk.gtk_drag_source_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-            gtk.gtk_drag_source_set ( hash(favButton), Gdk.ModifierType.BUTTON1_MASK, self.toFav, 3, Gdk.DragAction.COPY )
+            favButton.drag_source_set ( Gdk.ModifierType.BUTTON1_MASK, self.toFav, Gdk.DragAction.COPY )
 
             if position >= 0:
                 self.favoritesReorder( favButton.position, position )
@@ -1509,7 +1478,6 @@ def favoritesRemove( self, position ):
             self.favoritesBox.remove( self.favorites[ i ] )
             self.favoritesPositionOnGrid( self.favorites[ i ] )
         self.favoritesSave()
-        self.favoritesBox.resize( self.favoritesGetNumRows(), self.favCols )
 
     def favoritesRemoveLocation( self, location ):
         for fav in self.favorites:
@@ -1529,7 +1497,7 @@ def favoritesSave( self ):
 
             appListFile.close( )
         except Exception, e:
-            msgDlg = Gtk.MessageDialog( None, gtk.DialogFlags.MODAL, Gtk.MessageType.ERROR, Gtk.ButtonsType.OK, _("Couldn't save favorites. Check if you have write access to ~/.linuxmint/mintMenu")+"\n(" + e.__str__() + ")" )
+            msgDlg = Gtk.MessageDialog( None, Gtk.DialogFlags.MODAL, Gtk.MessageType.ERROR, Gtk.ButtonsType.OK, _("Couldn't save favorites. Check if you have write access to ~/.linuxmint/mintMenu")+"\n(" + e.__str__() + ")" )
             msgDlg.run();
             msgDlg.destroy();
 
@@ -1722,7 +1690,7 @@ def updateBoxes( self, menu_has_changed ):
                 for item in sortedApplicationList:
                     launcherName = item[0]
                     button = item[1]
-                    self.applicationsBox.pack_start( button, False, False, 0 )
+                    self.applicationsBox.add( button )
                     if launcherName in launcherNames:
                         button.hide()
                     else:
@@ -1740,7 +1708,7 @@ def loadMenuFiles( self ):
 
     # Build a list of all categories in the menu ( [ { "name", "icon", tooltip" } ]
     def buildCategoryList( self ):
-        newCategoryList = [ { "name": _("All"), "icon": "stock_select-all", "tooltip": _("Show all applications"), "filter":"", "index": 0 } ]
+        newCategoryList = [ { "name": _("All"), "icon": "edit-select-all", "tooltip": _("Show all applications"), "filter":"", "index": 0 } ]
 
         num = 1
 
diff --git a/usr/lib/linuxmint/mintMenu/plugins/easybuttons.py b/usr/lib/linuxmint/mintMenu/plugins/easybuttons.py
index 41a959d..bb01dc2 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/easybuttons.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/easybuttons.py
@@ -13,8 +13,6 @@
 import ctypes
 from ctypes import *
 
-gtk = CDLL("libgtk-x11-2.0.so.0")
-
 class IconManager(GObject.GObject):
 
     __gsignals__ = {
@@ -124,8 +122,8 @@ def __init__( self, iconName, iconSize, labels = None, buttonWidth = -1, buttonH
         self.set_size_request( buttonWidth, buttonHeight )
 
         Align1 = Gtk.Alignment.new( 0, 0.5, 1.0, 0 )
-        HBox1 = Gtk.HBox()
-        self.labelBox = Gtk.VBox( False, 2 )
+        HBox1 = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
+        self.labelBox = Gtk.Box( orientation=Gtk.Orientation.VERTICAL, spacing=2 )
 
 
         self.buttonImage = Gtk.Image()
@@ -135,7 +133,7 @@ def __init__( self, iconName, iconSize, labels = None, buttonWidth = -1, buttonH
         else:
             #[ iW, iH ] = iconManager.getIconSize( self.iconSize )
             self.buttonImage.set_size_request( self.iconSize, self.iconSize  )
-        self.image_box = Gtk.HBox()
+        self.image_box = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL )
         self.image_box.pack_start(self.buttonImage, False, False, 5)
         self.image_box.show_all()
         HBox1.pack_start( self.image_box, False, False, 0 )
@@ -163,7 +161,7 @@ def connectSelf( self, event, callback ):
         self.connections.append( self.connect( event, callback ) )
 
     def onRelease( self, widget ):
-        widget.set_state(Gtk.StateType.NORMAL)
+        widget.get_style_context().set_state( Gtk.StateFlags.NORMAL )
 
     def onDestroy( self, widget ):
         self.buttonImage.clear()
@@ -188,6 +186,7 @@ def addLabel( self, text, styles = None ):
 
         label.set_ellipsize( Pango.EllipsizeMode.END )
         label.set_alignment( 0.0, 1.0 )
+        label.set_max_width_chars(0)
         label.show()
         self.labelBox.pack_start( label , True, True, 0)
 
@@ -271,17 +270,13 @@ def __init__( self, desktopFile, iconSize):
         # Drag and Drop
         self.connectSelf( "drag-data-get", self.dragDataGet )
 
-        array = TargetEntry * 2
-        targets = array(( "text/plain", 0, 100 ), ( "text/uri-list", 0, 101 ))
-        gtk.gtk_drag_source_set.argtypes = [c_void_p, c_ushort, c_void_p, c_int, c_ushort]
-        gtk.gtk_drag_source_set(hash(self), Gdk.ModifierType.BUTTON1_MASK, targets, 2, Gdk.DragAction.COPY)
+        targets = ( Gtk.TargetEntry.new( "text/plain", 0, 100 ), Gtk.TargetEntry.new( "text/uri-list", 0, 101 ) )
+        self.drag_source_set( Gdk.ModifierType.BUTTON1_MASK, targets, Gdk.DragAction.COPY )
 
         icon = self.getIcon( Gtk.IconSize.DND )
         if icon:
             iconName, s = icon.get_icon_name()
-            c = c_char_p(iconName.decode('utf-8', 'ignore').encode('ascii', 'ignore'))
-            gtk.gtk_drag_source_set_icon_name.argtypes = [c_void_p, c_char_p]
-            gtk.gtk_drag_source_set_icon_name( hash(self), c)
+            self.drag_source_set_icon_name( iconName )
 
         self.connectSelf( "focus-in-event", self.onFocusIn )
         self.connectSelf( "focus-out-event", self.onFocusOut )
@@ -398,9 +393,7 @@ def iconChanged( self ):
         icon = self.getIcon( Gtk.IconSize.DND )
         if icon:
             iconName, size = icon.get_icon_name()
-            c = c_char_p(iconName.encode('ascii', 'ignore'))
-            gtk.gtk_drag_source_set_icon_name.argtypes = [c_void_p, c_char_p]
-            gtk.gtk_drag_source_set_icon_name( hash(self), c)
+            self.drag_source_set_icon_name( iconName )
 
     def startupFileChanged( self, *args ):
         self.inStartup = os.path.exists( self.startupFilePath )
@@ -493,7 +486,7 @@ def setupLabels( self ):
         appComment = self.appComment
         if self.highlight:
             try:
-                #color = self.labelBox.rc_get_style().fg[ Gtk.StateType.SELECTED ].to_string()
+                #color = self.labelBox.get_style_context().get_color( Gtk.StateFlags.SELECTED ).to_string()
                 #if len(color) > 0 and color[0] == "#":
                     #appName = "<span foreground=\"%s\"><b>%s</b></span>" % (color, appName);
                     #appComment = "<span foreground=\"%s\"><b>%s</b></span>" % (color, appComment);
diff --git a/usr/lib/linuxmint/mintMenu/plugins/execute.py b/usr/lib/linuxmint/mintMenu/plugins/execute.py
index 291060c..67d9d5c 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/execute.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/execute.py
@@ -23,7 +23,7 @@ def Execute( cmd , commandCwd=None):
             cwd = tmpCwd
 
     if isinstance( cmd, str ) or isinstance( cmd, unicode):
-        if (cmd.find("ubiquity") >= 0) or (cmd.find("/home/") >= 0) or (cmd.find("su-to-root") >= 0) or (cmd.find("\"") >= 0):
+        if (cmd.find("ubiquity") >= 0) or (cmd.find("/home/") >= 0) or (cmd.find("xdg-su") >= 0) or (cmd.find("\"") >= 0):
             print "running manually..."
             try:
                 os.chdir(cwd)
diff --git a/usr/lib/linuxmint/mintMenu/plugins/places.py b/usr/lib/linuxmint/mintMenu/plugins/places.py
index 5709967..d00c9ae 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/places.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/places.py
@@ -15,8 +15,6 @@
 from user import home
 from urllib import unquote
 
-gtk = CDLL("libgtk-x11-2.0.so.0")
-
 # i18n
 gettext.install("mintmenu", "/usr/share/linuxmint/locale")
 
@@ -263,8 +261,7 @@ def trashPopup( self, widget, event ):
             trashMenu.show_all()
             emptyTrashMenuItem.connect ( "activate", self.emptyTrash, widget )
             self.mintMenuWin.stopHiding()
-            gtk.gtk_menu_popup.argtypes = [c_void_p, c_void_p, c_void_p, c_void_p, c_void_p, c_uint, c_uint]
-            gtk.gtk_menu_popup(hash(trashMenu), None, None, None, None, 3, 0)
+            trashMenu.popup(None, None, None, None, 3, 0)
 
     def emptyTrash( self, menu, widget):
         os.system("rm -rf " + home + "/.local/share/Trash/info/*")
diff --git a/usr/lib/linuxmint/mintMenu/plugins/recent.py b/usr/lib/linuxmint/mintMenu/plugins/recent.py
index 0759a3b..2e3c6ed 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/recent.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/recent.py
@@ -1,7 +1,7 @@
 #!/usr/bin/python2
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from gi.repository import Gtk, Pango
 import os
@@ -140,13 +140,12 @@ def AddRecentBtn( self, Name, RecentImage ):
         Align1 = Gtk.Alignment()
         Align1.set( 0, 0.5, 0, 0)
         Align1.set_padding( 0, 0, 0, 0 )
-        HBox1 = Gtk.HBox( False, 5 )
-        VBox1 = Gtk.VBox( False, 2 )
+        HBox1 = Gtk.Box( orientation=Gtk.Orientation.HORIZONTAL, spacing=5 )
+        VBox1 = Gtk.Box( orientation=Gtk.Orientation.VERTICAL, spacing=2 )
 
         VBox1.show()
 
-        req = Gtk.Requisition()
-        AButton.size_request(req)
+        req = AButton.size_request()
 
         Label1 = Gtk.Label( DispName )
         Label1.set_size_request( req.width-20, -1 )
@@ -190,7 +189,7 @@ def GetRecent(self, *args, **kargs):
         FileString=[]
         IconString=[]
         RecentInfo=self.RecManagerInstance.get_items()
-        # print RecentInfo[0].get_icon(gtk.ICON_SIZE_MENU)
+        # print RecentInfo[0].get_icon(Gtk.IconSize.MENU)
         count=0
         MaxEntries=self.numentries
         if self.numentries == -1:
diff --git a/usr/lib/linuxmint/mintMenu/plugins/system_management.py b/usr/lib/linuxmint/mintMenu/plugins/system_management.py
index 6708106..b106cae 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/system_management.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/system_management.py
@@ -1,7 +1,7 @@
 #!/usr/bin/python2
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from gi.repository import Gtk
 import os
diff --git a/usr/lib/linuxmint/mintMenu/pointerMonitor.py b/usr/lib/linuxmint/mintMenu/pointerMonitor.py
index 7d643c8..caaa754 100644
--- a/usr/lib/linuxmint/mintMenu/pointerMonitor.py
+++ b/usr/lib/linuxmint/mintMenu/pointerMonitor.py
@@ -1,7 +1,7 @@
 #!/usr/bin/python2
 
 import gi
-gi.require_version("Gtk", "2.0")
+gi.require_version("Gtk", "3.0")
 
 from Xlib.display import Display
 from Xlib import X, error
@@ -10,8 +10,7 @@
 import ctypes
 from ctypes import *
 
-gdk = CDLL("libgdk-x11-2.0.so.0")
-gtk = CDLL("libgtk-x11-2.0.so.0")
+gdk = CDLL("libgdk-3.so.0")
 
 class PointerMonitor(GObject.GObject, threading.Thread):
     __gsignals__ = {

From be31734ffb9d5d23f69df2c193ebb90fd90b6f97 Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Tue, 6 Sep 2016 17:52:12 +0100
Subject: [PATCH 2/7] glade part #1

---
 usr/lib/linuxmint/mintMenu/mintMenu.glade          |   6 +-
 .../linuxmint/mintMenu/plugins/applications.glade  | 172 ++++++++++-----------
 usr/lib/linuxmint/mintMenu/plugins/places.glade    |  16 +-
 usr/lib/linuxmint/mintMenu/plugins/recent.glade    |  17 +-
 .../mintMenu/plugins/system_management.glade       |  16 +-
 5 files changed, 106 insertions(+), 121 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenu.glade b/usr/lib/linuxmint/mintMenu/mintMenu.glade
index b29b943..0762f78 100644
--- a/usr/lib/linuxmint/mintMenu/mintMenu.glade
+++ b/usr/lib/linuxmint/mintMenu/mintMenu.glade
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkWindow" id="mainWindow">
     <property name="can_focus">False</property>
     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK | GDK_KEY_PRESS_MASK | GDK_KEY_RELEASE_MASK</property>
@@ -16,9 +15,10 @@
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <child>
-          <object class="GtkHBox" id="paneholder">
+          <object class="GtkBox" id="paneholder">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="orientation">horizontal</property>
             <child>
               <placeholder/>
             </child>
diff --git a/usr/lib/linuxmint/mintMenu/plugins/applications.glade b/usr/lib/linuxmint/mintMenu/plugins/applications.glade
index 3986a83..9722395 100644
--- a/usr/lib/linuxmint/mintMenu/plugins/applications.glade
+++ b/usr/lib/linuxmint/mintMenu/plugins/applications.glade
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkWindow" id="mainWindow">
     <property name="width_request">169</property>
     <property name="height_request">227</property>
@@ -14,25 +13,26 @@
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <child>
-          <object class="GtkVBox" id="vbox4">
+          <object class="GtkBox" id="vbox4">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
             <child>
               <object class="GtkNotebook" id="notebook2">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="show_tabs">False</property>
                 <property name="show_border">False</property>
-                <property name="tab_border">14</property>
                 <child>
-                  <object class="GtkVBox" id="vbox5">
+                  <object class="GtkBox" id="vbox5">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
                     <property name="border_width">3</property>
+                    <property name="orientation">vertical</property>
                     <property name="spacing">3</property>
                     <child>
-                      <object class="GtkHBox" id="hbox8">
+                      <object class="GtkBox" id="hbox8">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="homogeneous">True</property>
@@ -40,11 +40,11 @@
                           <object class="GtkLabel" id="label6">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
                             <property name="xpad">15</property>
                             <property name="ypad">10</property>
                             <property name="label" translatable="yes">&lt;span weight="bold"&gt;Favorites&lt;/span&gt;</property>
                             <property name="use_markup">True</property>
+                            <property name="xalign">0</property>
                           </object>
                           <packing>
                             <property name="expand">True</property>
@@ -58,48 +58,40 @@
                             <property name="can_focus">True</property>
                             <property name="can_default">True</property>
                             <property name="receives_default">False</property>
-                            <property name="use_action_appearance">False</property>
                             <property name="relief">none</property>
                             <child>
-                              <object class="GtkAlignment" id="alignment3">
+                              <object class="GtkBox" id="hbox10">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
-                                <property name="xalign">1</property>
-                                <property name="xscale">0</property>
-                                <property name="yscale">0</property>
-                                <property name="right_padding">10</property>
+                                <property name="halign">end</property>
+                                <property name="margin_right">10</property>
+                                <property name="spacing">2</property>
                                 <child>
-                                  <object class="GtkHBox" id="hbox10">
+                                  <object class="GtkLabel" id="label7">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
-                                    <property name="spacing">2</property>
-                                    <child>
-                                      <object class="GtkLabel" id="label7">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <property name="label" translatable="yes">All _Applications</property>
-                                        <property name="use_underline">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">0</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkImage" id="image4">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <property name="xpad">5</property>
-                                        <property name="stock">gtk-go-forward</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">1</property>
-                                      </packing>
-                                    </child>
+                                    <property name="label" translatable="yes">All _Applications</property>
+                                    <property name="use_underline">True</property>
                                   </object>
+                                  <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
+                                    <property name="position">0</property>
+                                  </packing>
+                                </child>
+                                <child>
+                                  <object class="GtkImage" id="image4">
+                                    <property name="visible">True</property>
+                                    <property name="can_focus">False</property>
+                                    <property name="margin_left">5</property>
+                                    <property name="margin_right">5</property>
+                                    <property name="stock">gtk-go-forward</property>
+                                  </object>
+                                  <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
+                                    <property name="position">1</property>
+                                  </packing>
                                 </child>
                               </object>
                             </child>
@@ -127,10 +119,12 @@
                         <property name="resize_mode">queue</property>
                         <property name="shadow_type">none</property>
                         <child>
-                          <object class="GtkTable" id="favoritesBox">
+                          <object class="GtkGrid" id="favoritesBox">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="hexpand">True</property>
+                            <property name="vexpand">True</property>
+                            <property name="column_homogeneous">True</property>
                             <child>
                               <placeholder/>
                             </child>
@@ -149,13 +143,14 @@
                   <placeholder/>
                 </child>
                 <child>
-                  <object class="GtkVBox" id="vbox1">
+                  <object class="GtkBox" id="vbox1">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
                     <property name="border_width">3</property>
+                    <property name="orientation">vertical</property>
                     <property name="spacing">3</property>
                     <child>
-                      <object class="GtkHBox" id="hbox3">
+                      <object class="GtkBox" id="hbox3">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="homogeneous">True</property>
@@ -163,11 +158,11 @@
                           <object class="GtkLabel" id="label2">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
                             <property name="xpad">15</property>
                             <property name="ypad">10</property>
                             <property name="label" translatable="yes">&lt;span weight="bold"&gt;All Applications&lt;/span&gt;</property>
                             <property name="use_markup">True</property>
+                            <property name="xalign">0</property>
                           </object>
                           <packing>
                             <property name="expand">True</property>
@@ -181,48 +176,40 @@
                             <property name="can_focus">True</property>
                             <property name="can_default">True</property>
                             <property name="receives_default">False</property>
-                            <property name="use_action_appearance">False</property>
                             <property name="relief">none</property>
                             <child>
-                              <object class="GtkAlignment" id="alignment2">
+                              <object class="GtkBox" id="hbox4">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
-                                <property name="xalign">1</property>
-                                <property name="xscale">0</property>
-                                <property name="yscale">0</property>
-                                <property name="right_padding">10</property>
+                                <property name="halign">end</property>
+                                <property name="margin_right">10</property>
+                                <property name="spacing">2</property>
+                                <child>
+                                  <object class="GtkLabel" id="label3">
+                                    <property name="visible">True</property>
+                                    <property name="can_focus">False</property>
+                                    <property name="label" translatable="yes">_Favorites</property>
+                                    <property name="use_underline">True</property>
+                                  </object>
+                                  <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
+                                    <property name="position">0</property>
+                                  </packing>
+                                </child>
                                 <child>
-                                  <object class="GtkHBox" id="hbox4">
+                                  <object class="GtkImage" id="image3">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
-                                    <property name="spacing">2</property>
-                                    <child>
-                                      <object class="GtkLabel" id="label3">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <property name="label" translatable="yes">_Favorites</property>
-                                        <property name="use_underline">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">0</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkImage" id="image3">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <property name="xpad">5</property>
-                                        <property name="stock">gtk-go-forward</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">1</property>
-                                      </packing>
-                                    </child>
+                                    <property name="margin_left">5</property>
+                                    <property name="margin_right">5</property>
+                                    <property name="stock">gtk-go-forward</property>
                                   </object>
+                                  <packing>
+                                    <property name="expand">True</property>
+                                    <property name="fill">True</property>
+                                    <property name="position">1</property>
+                                  </packing>
                                 </child>
                               </object>
                             </child>
@@ -243,7 +230,7 @@
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkHBox" id="hbox5">
+                      <object class="GtkBox" id="hbox5">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <child>
@@ -251,16 +238,18 @@
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
                             <property name="hscrollbar_policy">never</property>
-                            <property name="vscrollbar_policy">automatic</property>
                             <child>
                               <object class="GtkViewport" id="viewport1">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
                                 <property name="shadow_type">none</property>
                                 <child>
-                                  <object class="GtkVBox" id="categoriesBox">
+                                  <object class="GtkBox" id="categoriesBox">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
+                                    <property name="hexpand">True</property>
+                                    <property name="vexpand">True</property>
+                                    <property name="orientation">vertical</property>
                                   </object>
                                 </child>
                               </object>
@@ -273,10 +262,11 @@
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkVSeparator" id="vseparator1">
+                          <object class="GtkSeparator" id="vseparator1">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
                             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="orientation">vertical</property>
                           </object>
                           <packing>
                             <property name="expand">False</property>
@@ -291,17 +281,18 @@
                             <property name="can_focus">False</property>
                             <property name="can_default">True</property>
                             <property name="hscrollbar_policy">never</property>
-                            <property name="vscrollbar_policy">automatic</property>
                             <child>
                               <object class="GtkViewport" id="viewport3">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
                                 <property name="shadow_type">none</property>
                                 <child>
-                                  <object class="GtkVBox" id="applicationsBox">
+                                  <object class="GtkBox" id="applicationsBox">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
+                                    <property name="vexpand">True</property>
                                     <property name="border_width">6</property>
+                                    <property name="orientation">vertical</property>
                                   </object>
                                 </child>
                               </object>
@@ -336,7 +327,7 @@
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="hbox9">
+              <object class="GtkBox" id="hbox9">
                 <property name="width_request">227</property>
                 <property name="height_request">30</property>
                 <property name="visible">True</property>
@@ -366,8 +357,6 @@
                     <property name="activates_default">True</property>
                     <property name="primary_icon_activatable">False</property>
                     <property name="secondary_icon_activatable">False</property>
-                    <property name="primary_icon_sensitive">True</property>
-                    <property name="secondary_icon_sensitive">True</property>
                     <signal name="changed" handler="on_entry1_changed" swapped="no"/>
                   </object>
                   <packing>
@@ -381,12 +370,11 @@
                     <property name="width_request">28</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
+                    <property name="focus_on_click">False</property>
                     <property name="can_default">True</property>
                     <property name="has_default">True</property>
                     <property name="receives_default">False</property>
-                    <property name="use_action_appearance">False</property>
                     <property name="relief">none</property>
-                    <property name="focus_on_click">False</property>
                     <signal name="clicked" handler="on_button17_clicked" swapped="no"/>
                     <child>
                       <object class="GtkImage" id="image1">
@@ -395,7 +383,7 @@
                         <property name="can_default">True</property>
                         <property name="has_default">True</property>
                         <property name="stock">gtk-find</property>
-                        <property name="icon-size">1</property>
+                        <property name="icon_size">1</property>
                       </object>
                     </child>
                   </object>
diff --git a/usr/lib/linuxmint/mintMenu/plugins/places.glade b/usr/lib/linuxmint/mintMenu/plugins/places.glade
index 569388c..167e844 100644
--- a/usr/lib/linuxmint/mintMenu/plugins/places.glade
+++ b/usr/lib/linuxmint/mintMenu/plugins/places.glade
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <interface>
-  <requires lib="gtk+" version="2.16"/>
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkWindow" id="mainWindow">
     <property name="can_focus">False</property>
     <property name="border_width">3</property>
@@ -15,10 +14,8 @@
             <property name="visible">True</property>
             <property name="can_focus">True</property>
             <property name="border_width">3</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
-            <signal name="drag-drop" handler="on_scrolledwindow_drag_drop" swapped="no"/>
             <signal name="drag-data-received" handler="on_scrolledwindow_drag_data_received" swapped="no"/>
+            <signal name="drag-drop" handler="on_scrolledwindow_drag_drop" swapped="no"/>
             <signal name="drag-motion" handler="on_scrolledwindow_drag_motion" swapped="no"/>
             <child>
               <object class="GtkViewport" id="viewport2">
@@ -26,14 +23,16 @@
                 <property name="can_focus">False</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkVBox" id="vbox1">
+                  <object class="GtkBox" id="vbox1">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
+                    <property name="orientation">vertical</property>
                     <child>
-                      <object class="GtkVBox" id="places_button_holder">
+                      <object class="GtkBox" id="places_button_holder">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="orientation">vertical</property>
                         <property name="spacing">2</property>
                       </object>
                       <packing>
@@ -43,9 +42,10 @@
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkVButtonBox" id="editable_button_holder">
+                      <object class="GtkButtonBox" id="editable_button_holder">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
+                        <property name="orientation">vertical</property>
                         <property name="layout_style">start</property>
                       </object>
                       <packing>
diff --git a/usr/lib/linuxmint/mintMenu/plugins/recent.glade b/usr/lib/linuxmint/mintMenu/plugins/recent.glade
index a567995..2db0c15 100644
--- a/usr/lib/linuxmint/mintMenu/plugins/recent.glade
+++ b/usr/lib/linuxmint/mintMenu/plugins/recent.glade
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkWindow" id="window1">
     <property name="can_focus">False</property>
     <property name="border_width">3</property>
@@ -12,9 +11,10 @@
         <property name="can_focus">False</property>
         <property name="border_width">5</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
+          <object class="GtkBox" id="vbox1">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
             <property name="spacing">3</property>
             <child>
               <object class="GtkNotebook" id="RecentTabs">
@@ -25,16 +25,15 @@
                   <object class="GtkScrolledWindow" id="scrolledwindow1">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
                     <child>
                       <object class="GtkViewport" id="viewport2">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <child>
-                          <object class="GtkVButtonBox" id="RecentApps">
+                          <object class="GtkButtonBox" id="RecentApps">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
+                            <property name="orientation">vertical</property>
                             <property name="layout_style">start</property>
                             <child>
                               <placeholder/>
@@ -59,17 +58,16 @@
                   <object class="GtkScrolledWindow" id="scrolledwindow2">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
                     <child>
                       <object class="GtkViewport" id="viewport1">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="shadow_type">none</property>
                         <child>
-                          <object class="GtkVButtonBox" id="RecentBox">
+                          <object class="GtkButtonBox" id="RecentBox">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
+                            <property name="orientation">vertical</property>
                             <property name="layout_style">start</property>
                           </object>
                         </child>
@@ -105,7 +103,6 @@
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
                 <signal name="clicked" handler="on_ClrBtn_clicked" swapped="no"/>
               </object>
diff --git a/usr/lib/linuxmint/mintMenu/plugins/system_management.glade b/usr/lib/linuxmint/mintMenu/plugins/system_management.glade
index 31bc2ce..fe21a9e 100644
--- a/usr/lib/linuxmint/mintMenu/plugins/system_management.glade
+++ b/usr/lib/linuxmint/mintMenu/plugins/system_management.glade
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkWindow" id="mainWindow">
     <property name="can_focus">False</property>
     <property name="border_width">3</property>
@@ -15,10 +14,8 @@
             <property name="visible">True</property>
             <property name="can_focus">True</property>
             <property name="border_width">3</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
-            <signal name="drag-drop" handler="on_scrolledwindow_drag_drop" swapped="no"/>
             <signal name="drag-data-received" handler="on_scrolledwindow_drag_data_received" swapped="no"/>
+            <signal name="drag-drop" handler="on_scrolledwindow_drag_drop" swapped="no"/>
             <signal name="drag-motion" handler="on_scrolledwindow_drag_motion" swapped="no"/>
             <child>
               <object class="GtkViewport" id="viewport2">
@@ -26,14 +23,16 @@
                 <property name="can_focus">False</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkVBox" id="vbox1">
+                  <object class="GtkBox" id="vbox1">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
+                    <property name="orientation">vertical</property>
                     <child>
-                      <object class="GtkVBox" id="system_button_holder">
+                      <object class="GtkBox" id="system_button_holder">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="orientation">vertical</property>
                         <property name="spacing">2</property>
                       </object>
                       <packing>
@@ -43,9 +42,10 @@
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkVButtonBox" id="editable_button_holder">
+                      <object class="GtkButtonBox" id="editable_button_holder">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
+                        <property name="orientation">vertical</property>
                         <property name="layout_style">start</property>
                       </object>
                       <packing>

From 76b0ace41f4cc6a7a04723ad16b94df7ea9cedd9 Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Tue, 6 Sep 2016 18:27:13 +0100
Subject: [PATCH 3/7] glade part #2

---
 usr/lib/linuxmint/mintMenu/mintMenuConfig.glade | 1334 ++++++++++-------------
 1 file changed, 576 insertions(+), 758 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
index 29dcf3f..f1522d7 100644
--- a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
+++ b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
@@ -1,97 +1,60 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
 <interface>
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkAdjustment" id="adjustment1">
     <property name="upper">10</property>
-    <property name="lower">0</property>
-    <property name="page_increment">0</property>
     <property name="step_increment">1</property>
-    <property name="page_size">0</property>
-    <property name="value">0</property>
   </object>
   <object class="GtkAdjustment" id="adjustment10">
-    <property name="upper">128</property>
     <property name="lower">1</property>
-    <property name="page_increment">0</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
+    <property name="upper">128</property>
     <property name="value">1</property>
+    <property name="step_increment">1</property>
   </object>
   <object class="GtkAdjustment" id="adjustment2">
     <property name="upper">100</property>
-    <property name="lower">0</property>
-    <property name="page_increment">0</property>
     <property name="step_increment">1</property>
-    <property name="page_size">0</property>
-    <property name="value">0</property>
   </object>
   <object class="GtkAdjustment" id="adjustment3">
-    <property name="upper">128</property>
     <property name="lower">1</property>
-    <property name="page_increment">0</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
+    <property name="upper">128</property>
     <property name="value">1</property>
+    <property name="step_increment">1</property>
   </object>
   <object class="GtkAdjustment" id="adjustment4">
     <property name="upper">1000</property>
-    <property name="lower">0</property>
-    <property name="page_increment">2</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
     <property name="value">100</property>
+    <property name="step_increment">1</property>
+    <property name="page_increment">2</property>
   </object>
   <object class="GtkAdjustment" id="adjustment5">
-    <property name="upper">4</property>
     <property name="lower">1</property>
-    <property name="page_increment">0</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
+    <property name="upper">4</property>
     <property name="value">1</property>
+    <property name="step_increment">1</property>
   </object>
   <object class="GtkAdjustment" id="adjustment6">
-    <property name="upper">128</property>
     <property name="lower">1</property>
-    <property name="page_increment">0</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
+    <property name="upper">128</property>
     <property name="value">1</property>
+    <property name="step_increment">1</property>
   </object>
   <object class="GtkAdjustment" id="adjustment7">
     <property name="upper">10000</property>
-    <property name="lower">0</property>
-    <property name="page_increment">10</property>
     <property name="step_increment">1</property>
-    <property name="page_size">0</property>
-    <property name="value">0</property>
+    <property name="page_increment">10</property>
   </object>
   <object class="GtkAdjustment" id="adjustment8">
-    <property name="upper">128</property>
     <property name="lower">1</property>
-    <property name="page_increment">0</property>
-    <property name="step_increment">1</property>
-    <property name="page_size">0</property>
+    <property name="upper">128</property>
     <property name="value">1</property>
+    <property name="step_increment">1</property>
   </object>
   <object class="GtkAdjustment" id="adjustment9">
     <property name="upper">10000</property>
-    <property name="lower">0</property>
-    <property name="page_increment">10</property>
     <property name="step_increment">1</property>
-    <property name="page_size">0</property>
-    <property name="value">0</property>
-  </object>
-  <object class="GtkListStore" id="model1">
-    <columns>
-      <column type="gchararray"/>
-    </columns>
-    <data>
-      <row>
-        <col id="0" translatable="yes">Default</col>
-      </row>
-    </data>
+    <property name="page_increment">10</property>
   </object>
-  <!-- interface-requires gtk+ 2.16 -->
-  <!-- interface-naming-policy toplevel-contextual -->
   <object class="GtkDialog" id="editPlaceDialog">
     <property name="can_focus">False</property>
     <property name="border_width">5</property>
@@ -101,12 +64,12 @@
     <property name="destroy_with_parent">True</property>
     <property name="type_hint">dialog</property>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox2">
+      <object class="GtkBox" id="dialog-vbox2">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <property name="spacing">2</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area2">
+          <object class="GtkButtonBox" id="dialog-action_area2">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
             <property name="layout_style">end</property>
@@ -133,7 +96,6 @@
                 <property name="can_focus">True</property>
                 <property name="can_default">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
               </object>
               <packing>
@@ -151,28 +113,34 @@
           </packing>
         </child>
         <child>
-          <object class="GtkTable" id="table1">
+          <object class="GtkGrid" id="table1">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
-            <property name="n_rows">2</property>
-            <property name="n_columns">2</property>
-            <property name="column_spacing">2</property>
             <property name="row_spacing">5</property>
+            <property name="column_spacing">2</property>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">Name:</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
             <child>
               <object class="GtkEntry" id="nameEntryBox">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="invisible_char">&#x25CF;</property>
+                <property name="invisible_char">●</property>
                 <property name="activates_default">True</property>
                 <property name="primary_icon_activatable">False</property>
                 <property name="secondary_icon_activatable">False</property>
-                <property name="primary_icon_sensitive">True</property>
-                <property name="secondary_icon_sensitive">True</property>
               </object>
               <packing>
                 <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
-                <property name="y_options">GTK_EXPAND</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
@@ -182,35 +150,22 @@
                 <property name="label" translatable="yes">Path:</property>
               </object>
               <packing>
+                <property name="left_attach">0</property>
                 <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
-                <property name="y_options">GTK_EXPAND</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkLabel" id="label2">
-                <property name="visible">True</property>
-                <property name="can_focus">False</property>
-                <property name="label" translatable="yes">Name:</property>
-              </object>
-              <packing>
-                <property name="y_options">GTK_EXPAND</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="hbox1">
+              <object class="GtkBox" id="hbox1">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <child>
                   <object class="GtkEntry" id="pathEntryBox">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="invisible_char">&#x25CF;</property>
+                    <property name="invisible_char">●</property>
                     <property name="activates_default">True</property>
                     <property name="primary_icon_activatable">False</property>
                     <property name="secondary_icon_activatable">False</property>
-                    <property name="primary_icon_sensitive">True</property>
-                    <property name="secondary_icon_sensitive">True</property>
                   </object>
                   <packing>
                     <property name="expand">True</property>
@@ -223,7 +178,6 @@
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
                     <property name="receives_default">True</property>
-                    <property name="use_action_appearance">False</property>
                     <child>
                       <object class="GtkImage" id="image1">
                         <property name="visible">True</property>
@@ -241,17 +195,14 @@
               </object>
               <packing>
                 <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
                 <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
-                <property name="y_options"/>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">True</property>
+            <property name="expand">False</property>
             <property name="fill">True</property>
-            <property name="position">1</property>
+            <property name="position">2</property>
           </packing>
         </child>
       </object>
@@ -270,12 +221,12 @@
     <property name="type_hint">dialog</property>
     <property name="action">select-folder</property>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox20">
+      <object class="GtkBox" id="dialog-vbox20">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <property name="spacing">2</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area20">
+          <object class="GtkButtonBox" id="dialog-action_area20">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
             <property name="layout_style">end</property>
@@ -286,7 +237,6 @@
                 <property name="can_focus">True</property>
                 <property name="can_default">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
               </object>
               <packing>
@@ -302,7 +252,6 @@
                 <property name="can_focus">True</property>
                 <property name="can_default">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
               </object>
               <packing>
@@ -326,8 +275,20 @@
     </child>
     <action-widgets>
       <action-widget response="-5">button1</action-widget>
+      <action-widget response="0">button2</action-widget>
     </action-widgets>
   </object>
+  <object class="GtkListStore" id="model1">
+    <columns>
+      <!-- column-name gchararray -->
+      <column type="gchararray"/>
+    </columns>
+    <data>
+      <row>
+        <col id="0" translatable="yes">Default</col>
+      </row>
+    </data>
+  </object>
   <object class="GtkWindow" id="mainWindow">
     <property name="can_focus">False</property>
     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
@@ -335,10 +296,11 @@
     <property name="window_position">center</property>
     <property name="destroy_with_parent">True</property>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkBox" id="vbox1">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+        <property name="orientation">vertical</property>
         <child>
           <object class="GtkNotebook" id="notebook1">
             <property name="visible">True</property>
@@ -677,216 +639,164 @@
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="hbox23">
+              <object class="GtkFrame" id="frame7">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="spacing">4</property>
-                <property name="homogeneous">True</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
+                <property name="label_xalign">0</property>
+                <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkFrame" id="frame19">
+                  <object class="GtkBox" id="vbox13">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="border_width">6</property>
-                    <property name="label_xalign">0</property>
-                    <property name="label_yalign">0</property>
-                    <property name="shadow_type">none</property>
+                    <property name="orientation">vertical</property>
                     <child>
-                      <object class="GtkAlignment" id="alignment43">
+                      <object class="GtkCheckButton" id="useCustomColors">
+                        <property name="label" translatable="yes">Use custom colors</property>
                         <property name="visible">True</property>
-                        <property name="can_focus">False</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="bottom_padding">6</property>
-                        <property name="left_padding">6</property>
-                        <property name="right_padding">6</property>
+                        <property name="halign">start</property>
+                        <property name="margin_top">5</property>
+                        <property name="draw_indicator">True</property>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">True</property>
+                        <property name="padding">5</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkGrid" id="table29">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="row_spacing">2</property>
+                        <property name="column_homogeneous">True</property>
                         <child>
-                          <object class="GtkVBox" id="vbox13">
+                          <object class="GtkLabel" id="headingColorLabel">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
                             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Headings:</property>
+                            <property name="ellipsize">start</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkColorButton" id="headingColor">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkLabel" id="borderColorLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Borders:</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkColorButton" id="borderColor">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">1</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkLabel" id="backgroundColorLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Background:</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkColorButton" id="backgroundColor">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkLabel" id="themeLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Theme:</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">3</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkComboBox" id="themesCombo">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="model">model1</property>
                             <child>
-                              <object class="GtkCheckButton" id="useCustomColors">
-                                <property name="label" translatable="yes">Use custom colors</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="xalign">0</property>
-                                <property name="draw_indicator">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">True</property>
-                                <property name="padding">5</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkTable" id="table29">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="n_rows">4</property>
-                                <property name="n_columns">2</property>
-                                <property name="row_spacing">2</property>
-                                <child>
-                                  <object class="GtkLabel" id="headingColorLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="xalign">0</property>
-                                    <property name="label" translatable="yes">Headings:</property>
-                                  </object>
-                                  <packing>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                    <property name="x_padding">5</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkLabel" id="borderColorLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="xalign">0</property>
-                                    <property name="label" translatable="yes">Borders:</property>
-                                  </object>
-                                  <packing>
-                                    <property name="top_attach">1</property>
-                                    <property name="bottom_attach">2</property>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                    <property name="x_padding">5</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkLabel" id="backgroundColorLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="xalign">0</property>
-                                    <property name="label" translatable="yes">Background:</property>
-                                  </object>
-                                  <packing>
-                                    <property name="top_attach">2</property>
-                                    <property name="bottom_attach">3</property>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                    <property name="x_padding">5</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkColorButton" id="borderColor">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="use_action_appearance">False</property>
-                                    <property name="color">#000000000000</property>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">1</property>
-                                    <property name="right_attach">2</property>
-                                    <property name="top_attach">1</property>
-                                    <property name="bottom_attach">2</property>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkColorButton" id="backgroundColor">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="use_action_appearance">False</property>
-                                    <property name="color">#000000000000</property>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">1</property>
-                                    <property name="right_attach">2</property>
-                                    <property name="top_attach">2</property>
-                                    <property name="bottom_attach">3</property>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkColorButton" id="headingColor">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="use_action_appearance">False</property>
-                                    <property name="color">#000000000000</property>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">1</property>
-                                    <property name="right_attach">2</property>
-                                    <property name="x_options">GTK_FILL</property>
-                                    <property name="y_options">GTK_FILL</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkLabel" id="themeLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="xalign">0</property>
-                                    <property name="label" translatable="yes">Theme:</property>
-                                  </object>
-                                  <packing>
-                                    <property name="top_attach">3</property>
-                                    <property name="bottom_attach">4</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkComboBox" id="themesCombo">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="model">model1</property>
-                                    <child>
-                                      <object class="GtkCellRendererText" id="renderer1"/>
-                                      <attributes>
-                                        <attribute name="text">0</attribute>
-                                      </attributes>
-                                    </child>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">1</property>
-                                    <property name="right_attach">2</property>
-                                    <property name="top_attach">3</property>
-                                    <property name="bottom_attach">4</property>
-                                  </packing>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">True</property>
-                                <property name="position">1</property>
-                              </packing>
+                              <object class="GtkCellRendererText" id="renderer1"/>
+                              <attributes>
+                                <attribute name="text">0</attribute>
+                              </attributes>
                             </child>
                           </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">3</property>
+                          </packing>
                         </child>
                       </object>
-                    </child>
-                    <child type="label">
-                      <object class="GtkLabel" id="label31">
-                        <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_markup">True</property>
-                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">True</property>
+                        <property name="position">1</property>
+                      </packing>
                     </child>
                   </object>
-                  <packing>
-                    <property name="expand">True</property>
-                    <property name="fill">True</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
               </object>
+              <packing>
+                <property name="position">2</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="colorsLabel">
@@ -901,57 +811,35 @@
               </packing>
             </child>
             <child>
-              <object class="GtkFrame" id="frame25">
+              <object class="GtkFrame" id="frame8">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="border_width">3</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkTable" id="table17">
+                  <object class="GtkGrid" id="table17">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="n_rows">8</property>
-                    <property name="n_columns">2</property>
                     <property name="row_spacing">5</property>
-                    <property name="homogeneous">True</property>
                     <child>
-                      <object class="GtkLabel" id="iconSizeLabel">
-                        <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">Icon size:</property>
-                      </object>
-                      <packing>
-                        <property name="top_attach">4</property>
-                        <property name="bottom_attach">5</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkSpinButton" id="iconSize">
+                      <object class="GtkCheckButton" id="showAppComments">
+                        <property name="label" translatable="yes">Show application comments</property>
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="invisible_char">&#x25CF;</property>
-                        <property name="primary_icon_activatable">False</property>
-                        <property name="secondary_icon_activatable">False</property>
-                        <property name="primary_icon_sensitive">True</property>
-                        <property name="secondary_icon_sensitive">True</property>
-                        <property name="adjustment">adjustment3</property>
+                        <property name="margin_top">10</property>
+                        <property name="draw_indicator">True</property>
                       </object>
                       <packing>
-                        <property name="left_attach">1</property>
-                        <property name="right_attach">2</property>
-                        <property name="top_attach">4</property>
-                        <property name="bottom_attach">5</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                        <property name="width">2</property>
                       </packing>
                     </child>
                     <child>
@@ -961,33 +849,12 @@
                         <property name="can_focus">True</property>
                         <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_action_appearance">False</property>
                         <property name="draw_indicator">True</property>
                       </object>
                       <packing>
-                        <property name="right_attach">2</property>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">1</property>
-                        <property name="bottom_attach">2</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="showAppComments">
-                        <property name="label" translatable="yes">Show application comments</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_action_appearance">False</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="right_attach">2</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
+                        <property name="width">2</property>
                       </packing>
                     </child>
                     <child>
@@ -997,16 +864,12 @@
                         <property name="can_focus">True</property>
                         <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_action_appearance">False</property>
                         <property name="draw_indicator">True</property>
                       </object>
                       <packing>
-                        <property name="right_attach">2</property>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">2</property>
-                        <property name="bottom_attach">3</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
+                        <property name="width">2</property>
                       </packing>
                     </child>
                     <child>
@@ -1014,14 +877,12 @@
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="xalign">0</property>
+                        <property name="halign">start</property>
                         <property name="label" translatable="yes">Hover delay (seconds):</property>
                       </object>
                       <packing>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">3</property>
-                        <property name="bottom_attach">4</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
                       </packing>
                     </child>
                     <child>
@@ -1029,21 +890,46 @@
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="invisible_char">&#x25CF;</property>
+                        <property name="invisible_char">●</property>
+                        <property name="text" translatable="yes">100</property>
                         <property name="primary_icon_activatable">False</property>
                         <property name="secondary_icon_activatable">False</property>
-                        <property name="primary_icon_sensitive">True</property>
-                        <property name="secondary_icon_sensitive">True</property>
                         <property name="adjustment">adjustment4</property>
+                        <property name="value">100</property>
                       </object>
                       <packing>
                         <property name="left_attach">1</property>
-                        <property name="right_attach">2</property>
                         <property name="top_attach">3</property>
-                        <property name="bottom_attach">4</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="iconSizeLabel">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="halign">start</property>
+                        <property name="label" translatable="yes">Icon size:</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">4</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkSpinButton" id="iconSize">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="invisible_char">●</property>
+                        <property name="text" translatable="yes">1</property>
+                        <property name="primary_icon_activatable">False</property>
+                        <property name="secondary_icon_activatable">False</property>
+                        <property name="adjustment">adjustment3</property>
+                        <property name="value">1</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">4</property>
                       </packing>
                     </child>
                     <child>
@@ -1051,14 +937,12 @@
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="xalign">0</property>
+                        <property name="halign">start</property>
                         <property name="label" translatable="yes">Search command:</property>
                       </object>
                       <packing>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">5</property>
-                        <property name="bottom_attach">6</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
                       </packing>
                     </child>
                     <child>
@@ -1066,20 +950,13 @@
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_STRUCTURE_MASK</property>
-                        <property name="invisible_char">&#x25CF;</property>
+                        <property name="invisible_char">●</property>
                         <property name="primary_icon_activatable">False</property>
                         <property name="secondary_icon_activatable">False</property>
-                        <property name="primary_icon_sensitive">True</property>
-                        <property name="secondary_icon_sensitive">True</property>
                       </object>
                       <packing>
                         <property name="left_attach">1</property>
-                        <property name="right_attach">2</property>
                         <property name="top_attach">5</property>
-                        <property name="bottom_attach">6</property>
-                        <property name="x_options"/>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
                       </packing>
                     </child>
                     <child>
@@ -1108,32 +985,29 @@
                         <property name="can_focus">True</property>
                         <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_action_appearance">False</property>
                         <property name="draw_indicator">True</property>
                       </object>
                       <packing>
-                        <property name="right_attach">2</property>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">7</property>
-                        <property name="bottom_attach">8</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options"/>
-                        <property name="x_padding">5</property>
+                        <property name="width">2</property>
                       </packing>
                     </child>
-                  </object>
-                </child>
-                <child type="label">
-                  <object class="GtkLabel" id="applicationsLabel">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="use_markup">True</property>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
                   </object>
                 </child>
               </object>
+              <packing>
+                <property name="position">3</property>
+              </packing>
             </child>
             <child type="tab">
-              <object class="GtkLabel" id="label23">
+              <object class="GtkLabel" id="applicationsLabel">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
@@ -1145,34 +1019,34 @@
               </packing>
             </child>
             <child>
-              <object class="GtkFrame" id="frame26">
+              <object class="GtkFrame" id="frame9">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="border_width">3</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkTable" id="table18">
+                  <object class="GtkGrid" id="table18">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="n_rows">3</property>
-                    <property name="n_columns">2</property>
-                    <property name="column_spacing">5</property>
+                    <property name="margin_top">5</property>
                     <property name="row_spacing">5</property>
+                    <property name="column_spacing">5</property>
                     <child>
                       <object class="GtkLabel" id="numberColumnsLabel">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="xalign">0</property>
+                        <property name="halign">start</property>
                         <property name="label" translatable="yes">Number of columns:</property>
                       </object>
                       <packing>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options">GTK_FILL</property>
-                        <property name="x_padding">5</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
@@ -1180,18 +1054,15 @@
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="text" translatable="yes">1</property>
                         <property name="primary_icon_activatable">False</property>
                         <property name="secondary_icon_activatable">False</property>
-                        <property name="primary_icon_sensitive">True</property>
-                        <property name="secondary_icon_sensitive">True</property>
                         <property name="adjustment">adjustment5</property>
+                        <property name="value">1</property>
                       </object>
                       <packing>
                         <property name="left_attach">1</property>
-                        <property name="right_attach">2</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options">GTK_FILL</property>
-                        <property name="x_padding">5</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
@@ -1199,15 +1070,12 @@
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="xalign">0</property>
+                        <property name="halign">start</property>
                         <property name="label" translatable="yes">Icon size:</property>
                       </object>
                       <packing>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">1</property>
-                        <property name="bottom_attach">2</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options">GTK_FILL</property>
-                        <property name="x_padding">5</property>
                       </packing>
                     </child>
                     <child>
@@ -1215,20 +1083,15 @@
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="text" translatable="yes">1</property>
                         <property name="primary_icon_activatable">False</property>
                         <property name="secondary_icon_activatable">False</property>
-                        <property name="primary_icon_sensitive">True</property>
-                        <property name="secondary_icon_sensitive">True</property>
                         <property name="adjustment">adjustment6</property>
+                        <property name="value">1</property>
                       </object>
                       <packing>
                         <property name="left_attach">1</property>
-                        <property name="right_attach">2</property>
                         <property name="top_attach">1</property>
-                        <property name="bottom_attach">2</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options">GTK_FILL</property>
-                        <property name="x_padding">5</property>
                       </packing>
                     </child>
                     <child>
@@ -1238,29 +1101,20 @@
                         <property name="can_focus">True</property>
                         <property name="receives_default">False</property>
                         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="use_action_appearance">False</property>
                         <property name="draw_indicator">True</property>
                       </object>
                       <packing>
-                        <property name="right_attach">2</property>
+                        <property name="left_attach">0</property>
                         <property name="top_attach">2</property>
-                        <property name="bottom_attach">3</property>
-                        <property name="x_options">GTK_FILL</property>
-                        <property name="y_options">GTK_FILL</property>
-                        <property name="x_padding">5</property>
+                        <property name="width">2</property>
                       </packing>
                     </child>
                   </object>
                 </child>
-                <child type="label">
-                  <object class="GtkLabel" id="favoritesLabel">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                </child>
               </object>
+              <packing>
+                <property name="position">4</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="favLabel">
@@ -1275,28 +1129,48 @@
               </packing>
             </child>
             <child>
-              <object class="GtkFrame" id="frame1">
+              <object class="GtkFrame" id="frame10">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkAlignment" id="alignment1">
+                  <object class="GtkBox" id="vbox2">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="left_padding">12</property>
+                    <property name="orientation">vertical</property>
+                    <child>
+                      <object class="GtkCheckButton" id="allowscrollbarcheckbutton">
+                        <property name="label" translatable="yes">Allow Scrollbar</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
+                        <property name="margin_top">10</property>
+                        <property name="draw_indicator">True</property>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
                     <child>
-                      <object class="GtkVBox" id="vbox2">
+                      <object class="GtkBox" id="hbox2">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
+                        <property name="margin_left">5</property>
+                        <property name="margin_bottom">3</property>
+                        <property name="spacing">4</property>
                         <child>
-                          <object class="GtkCheckButton" id="allowscrollbarcheckbutton">
-                            <property name="label" translatable="yes">Allow Scrollbar</property>
+                          <object class="GtkLabel" id="placesHeightEntryLabel">
                             <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="use_action_appearance">False</property>
-                            <property name="draw_indicator">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Height:</property>
+                            <property name="use_markup">True</property>
                           </object>
                           <packing>
                             <property name="expand">False</property>
@@ -1305,129 +1179,239 @@
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkAlignment" id="alignment5">
+                          <object class="GtkSpinButton" id="placesHeightSpinButton">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="max_length">5</property>
+                            <property name="invisible_char">●</property>
+                            <property name="caps_lock_warning">False</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                            <property name="adjustment">adjustment7</property>
+                            <property name="numeric">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">2</property>
+                          </packing>
+                        </child>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">True</property>
+                        <property name="position">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkBox" id="hbox5">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="border_width">3</property>
+                        <property name="spacing">4</property>
+                        <child>
+                          <object class="GtkLabel" id="placesIconSizeLabel">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="bottom_padding">3</property>
-                            <property name="left_padding">5</property>
-                            <child>
-                              <object class="GtkHBox" id="hbox2">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="spacing">4</property>
-                                <child>
-                                  <object class="GtkLabel" id="placesHeightEntryLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="label" translatable="yes">Height:</property>
-                                    <property name="use_markup">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkSpinButton" id="placesHeightSpinButton">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="max_length">5</property>
-                                    <property name="invisible_char">&#x25CF;</property>
-                                    <property name="caps_lock_warning">False</property>
-                                    <property name="primary_icon_activatable">False</property>
-                                    <property name="secondary_icon_activatable">False</property>
-                                    <property name="primary_icon_sensitive">True</property>
-                                    <property name="secondary_icon_sensitive">True</property>
-                                    <property name="adjustment">adjustment7</property>
-                                    <property name="numeric">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">2</property>
-                                  </packing>
-                                </child>
-                              </object>
-                            </child>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Icon size:</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">True</property>
+                            <property name="position">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkSpinButton" id="placesIconSize">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="invisible_char">●</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                            <property name="adjustment">adjustment8</property>
                           </object>
                           <packing>
                             <property name="expand">False</property>
                             <property name="fill">False</property>
-                            <property name="padding">4</property>
                             <property name="position">1</property>
                           </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="expand">True</property>
+                        <property name="fill">True</property>
+                        <property name="position">2</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkFrame" id="frame3">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label_xalign">0</property>
+                        <property name="shadow_type">none</property>
                         <child>
-                          <object class="GtkHBox" id="hbox5">
+                          <object class="GtkBox" id="vbox4">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="border_width">3</property>
-                            <property name="spacing">4</property>
+                            <property name="margin_left">14</property>
+                            <property name="margin_top">2</property>
+                            <property name="margin_bottom">10</property>
+                            <property name="orientation">vertical</property>
                             <child>
-                              <object class="GtkLabel" id="placesIconSizeLabel">
+                              <object class="GtkCheckButton" id="computercheckbutton">
+                                <property name="label" translatable="yes">Computer</property>
                                 <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Icon size:</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
                               </object>
                               <packing>
                                 <property name="expand">False</property>
-                                <property name="fill">True</property>
+                                <property name="fill">False</property>
                                 <property name="position">0</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkSpinButton" id="placesIconSize">
+                              <object class="GtkCheckButton" id="homecheckbutton">
+                                <property name="label" translatable="yes">Home Folder</property>
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="invisible_char">&#x25CF;</property>
-                                <property name="primary_icon_activatable">False</property>
-                                <property name="secondary_icon_activatable">False</property>
-                                <property name="primary_icon_sensitive">True</property>
-                                <property name="secondary_icon_sensitive">True</property>
-                                <property name="adjustment">adjustment8</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
                                 <property name="position">1</property>
                               </packing>
                             </child>
+                            <child>
+                              <object class="GtkCheckButton" id="networkcheckbutton">
+                                <property name="label" translatable="yes">Network</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">2</property>
+                              </packing>
+                            </child>
+                            <child>
+                              <object class="GtkCheckButton" id="desktopcheckbutton">
+                                <property name="label" translatable="yes">Desktop</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">3</property>
+                              </packing>
+                            </child>
+                            <child>
+                              <object class="GtkCheckButton" id="trashcheckbutton">
+                                <property name="label" translatable="yes">Trash</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">4</property>
+                              </packing>
+                            </child>
+                          </object>
+                        </child>
+                        <child type="label">
+                          <object class="GtkLabel" id="defaultPlacesFrameLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Toggle Default Places:</property>
+                            <property name="use_markup">True</property>
                           </object>
-                          <packing>
-                            <property name="expand">True</property>
-                            <property name="fill">True</property>
-                            <property name="position">2</property>
-                          </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">3</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkCheckButton" id="showgtkbookmarkscheckbutton">
+                        <property name="label" translatable="yes">Show GTK bookmarks</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
+                        <property name="draw_indicator">True</property>
+                      </object>
+                      <packing>
+                        <property name="expand">True</property>
+                        <property name="fill">True</property>
+                        <property name="position">4</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkFrame" id="frame2">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label_xalign">0</property>
+                        <property name="shadow_type">none</property>
                         <child>
-                          <object class="GtkFrame" id="frame3">
+                          <object class="GtkBox" id="hbox25">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="label_xalign">0</property>
-                            <property name="shadow_type">none</property>
+                            <property name="margin_top">9</property>
+                            <child>
+                              <object class="GtkScrolledWindow" id="scrolledwindow1">
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="shadow_type">etched-in</property>
+                                <child>
+                                  <object class="GtkTreeView" id="customplacestree">
+                                    <property name="visible">True</property>
+                                    <property name="can_focus">True</property>
+                                    <property name="reorderable">True</property>
+                                    <child internal-child="selection">
+                                      <object class="GtkTreeSelection"/>
+                                    </child>
+                                  </object>
+                                </child>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">0</property>
+                              </packing>
+                            </child>
                             <child>
-                              <object class="GtkAlignment" id="alignment2">
+                              <object class="GtkBox" id="vbox3">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
-                                <property name="top_padding">2</property>
-                                <property name="bottom_padding">10</property>
-                                <property name="left_padding">14</property>
+                                <property name="orientation">vertical</property>
                                 <child>
-                                  <object class="GtkVBox" id="vbox4">
+                                  <object class="GtkButtonBox" id="vbuttonbox1">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
+                                    <property name="orientation">vertical</property>
+                                    <property name="spacing">5</property>
                                     <child>
-                                      <object class="GtkCheckButton" id="computercheckbutton">
-                                        <property name="label" translatable="yes">Computer</property>
+                                      <object class="GtkButton" id="newButton">
+                                        <property name="label">gtk-new</property>
                                         <property name="visible">True</property>
                                         <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
+                                        <property name="receives_default">True</property>
+                                        <property name="use_stock">True</property>
                                       </object>
                                       <packing>
                                         <property name="expand">False</property>
@@ -1436,291 +1420,126 @@
                                       </packing>
                                     </child>
                                     <child>
-                                      <object class="GtkCheckButton" id="homecheckbutton">
-                                        <property name="label" translatable="yes">Home Folder</property>
+                                      <object class="GtkButton" id="editButton">
+                                        <property name="label">gtk-edit</property>
                                         <property name="visible">True</property>
                                         <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
+                                        <property name="receives_default">True</property>
+                                        <property name="use_stock">True</property>
                                       </object>
                                       <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
+                                        <property name="expand">False</property>
+                                        <property name="fill">False</property>
                                         <property name="position">1</property>
                                       </packing>
                                     </child>
+                                  </object>
+                                  <packing>
+                                    <property name="expand">False</property>
+                                    <property name="fill">False</property>
+                                    <property name="padding">6</property>
+                                    <property name="position">0</property>
+                                  </packing>
+                                </child>
+                                <child>
+                                  <object class="GtkButtonBox" id="vbuttonbox2">
+                                    <property name="visible">True</property>
+                                    <property name="can_focus">False</property>
+                                    <property name="orientation">vertical</property>
                                     <child>
-                                      <object class="GtkCheckButton" id="networkcheckbutton">
-                                        <property name="label" translatable="yes">Network</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">2</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="desktopcheckbutton">
-                                        <property name="label" translatable="yes">Desktop</property>
+                                      <object class="GtkButton" id="upButton">
+                                        <property name="label">gtk-go-up</property>
                                         <property name="visible">True</property>
                                         <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
+                                        <property name="receives_default">True</property>
+                                        <property name="use_stock">True</property>
                                       </object>
                                       <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">3</property>
+                                        <property name="expand">False</property>
+                                        <property name="fill">False</property>
+                                        <property name="position">0</property>
                                       </packing>
                                     </child>
                                     <child>
-                                      <object class="GtkCheckButton" id="trashcheckbutton">
-                                        <property name="label" translatable="yes">Trash</property>
+                                      <object class="GtkButton" id="downButton">
+                                        <property name="label">gtk-go-down</property>
                                         <property name="visible">True</property>
                                         <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
+                                        <property name="receives_default">True</property>
+                                        <property name="use_stock">True</property>
                                       </object>
                                       <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">4</property>
+                                        <property name="expand">False</property>
+                                        <property name="fill">False</property>
+                                        <property name="position">1</property>
                                       </packing>
                                     </child>
                                   </object>
+                                  <packing>
+                                    <property name="expand">False</property>
+                                    <property name="fill">False</property>
+                                    <property name="padding">5</property>
+                                    <property name="position">1</property>
+                                  </packing>
                                 </child>
-                              </object>
-                            </child>
-                            <child type="label">
-                              <object class="GtkLabel" id="defaultPlacesFrameLabel">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="label" translatable="yes">Toggle Default Places:</property>
-                                <property name="use_markup">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">3</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkCheckButton" id="showgtkbookmarkscheckbutton">
-                            <property name="label" translatable="yes">Show GTK bookmarks</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="use_action_appearance">False</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">True</property>
-                            <property name="fill">True</property>
-                            <property name="position">4</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkFrame" id="frame2">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="label_xalign">0</property>
-                            <property name="shadow_type">none</property>
-                            <child>
-                              <object class="GtkAlignment" id="alignment3">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="top_padding">9</property>
                                 <child>
-                                  <object class="GtkHBox" id="hbox25">
+                                  <object class="GtkButtonBox" id="vbuttonbox3">
                                     <property name="visible">True</property>
                                     <property name="can_focus">False</property>
+                                    <property name="orientation">vertical</property>
                                     <child>
-                                      <object class="GtkScrolledWindow" id="scrolledwindow1">
+                                      <object class="GtkButton" id="removeButton">
+                                        <property name="label">gtk-remove</property>
                                         <property name="visible">True</property>
                                         <property name="can_focus">True</property>
-                                        <property name="hscrollbar_policy">automatic</property>
-                                        <property name="vscrollbar_policy">automatic</property>
-                                        <property name="shadow_type">etched-in</property>
-                                        <child>
-                                          <object class="GtkTreeView" id="customplacestree">
-                                            <property name="visible">True</property>
-                                            <property name="can_focus">True</property>
-                                            <property name="reorderable">True</property>
-                                          </object>
-                                        </child>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">0</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkVBox" id="vbox3">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <child>
-                                          <object class="GtkVButtonBox" id="vbuttonbox1">
-                                            <property name="visible">True</property>
-                                            <property name="can_focus">False</property>
-                                            <property name="spacing">5</property>
-                                            <child>
-                                              <object class="GtkButton" id="newButton">
-                                                <property name="label">gtk-new</property>
-                                                <property name="visible">True</property>
-                                                <property name="can_focus">True</property>
-                                                <property name="receives_default">True</property>
-                                                <property name="use_action_appearance">False</property>
-                                                <property name="use_stock">True</property>
-                                              </object>
-                                              <packing>
-                                                <property name="expand">False</property>
-                                                <property name="fill">False</property>
-                                                <property name="position">0</property>
-                                              </packing>
-                                            </child>
-                                            <child>
-                                              <object class="GtkButton" id="editButton">
-                                                <property name="label">gtk-edit</property>
-                                                <property name="visible">True</property>
-                                                <property name="can_focus">True</property>
-                                                <property name="receives_default">True</property>
-                                                <property name="use_action_appearance">False</property>
-                                                <property name="use_stock">True</property>
-                                              </object>
-                                              <packing>
-                                                <property name="expand">False</property>
-                                                <property name="fill">False</property>
-                                                <property name="position">1</property>
-                                              </packing>
-                                            </child>
-                                          </object>
-                                          <packing>
-                                            <property name="expand">False</property>
-                                            <property name="fill">False</property>
-                                            <property name="padding">6</property>
-                                            <property name="position">0</property>
-                                          </packing>
-                                        </child>
-                                        <child>
-                                          <object class="GtkVButtonBox" id="vbuttonbox2">
-                                            <property name="visible">True</property>
-                                            <property name="can_focus">False</property>
-                                            <child>
-                                              <object class="GtkButton" id="upButton">
-                                                <property name="label">gtk-go-up</property>
-                                                <property name="visible">True</property>
-                                                <property name="can_focus">True</property>
-                                                <property name="receives_default">True</property>
-                                                <property name="use_action_appearance">False</property>
-                                                <property name="use_stock">True</property>
-                                              </object>
-                                              <packing>
-                                                <property name="expand">False</property>
-                                                <property name="fill">False</property>
-                                                <property name="position">0</property>
-                                              </packing>
-                                            </child>
-                                            <child>
-                                              <object class="GtkButton" id="downButton">
-                                                <property name="label">gtk-go-down</property>
-                                                <property name="visible">True</property>
-                                                <property name="can_focus">True</property>
-                                                <property name="receives_default">True</property>
-                                                <property name="use_action_appearance">False</property>
-                                                <property name="use_stock">True</property>
-                                              </object>
-                                              <packing>
-                                                <property name="expand">False</property>
-                                                <property name="fill">False</property>
-                                                <property name="position">1</property>
-                                              </packing>
-                                            </child>
-                                          </object>
-                                          <packing>
-                                            <property name="expand">False</property>
-                                            <property name="fill">False</property>
-                                            <property name="padding">5</property>
-                                            <property name="position">1</property>
-                                          </packing>
-                                        </child>
-                                        <child>
-                                          <object class="GtkVButtonBox" id="vbuttonbox3">
-                                            <property name="visible">True</property>
-                                            <property name="can_focus">False</property>
-                                            <child>
-                                              <object class="GtkButton" id="removeButton">
-                                                <property name="label">gtk-remove</property>
-                                                <property name="visible">True</property>
-                                                <property name="can_focus">True</property>
-                                                <property name="receives_default">True</property>
-                                                <property name="use_action_appearance">False</property>
-                                                <property name="use_stock">True</property>
-                                              </object>
-                                              <packing>
-                                                <property name="expand">False</property>
-                                                <property name="fill">False</property>
-                                                <property name="position">0</property>
-                                              </packing>
-                                            </child>
-                                          </object>
-                                          <packing>
-                                            <property name="expand">False</property>
-                                            <property name="fill">False</property>
-                                            <property name="padding">5</property>
-                                            <property name="position">2</property>
-                                          </packing>
-                                        </child>
+                                        <property name="receives_default">True</property>
+                                        <property name="use_stock">True</property>
                                       </object>
                                       <packing>
                                         <property name="expand">False</property>
                                         <property name="fill">False</property>
-                                        <property name="padding">6</property>
-                                        <property name="position">1</property>
+                                        <property name="position">0</property>
                                       </packing>
                                     </child>
                                   </object>
+                                  <packing>
+                                    <property name="expand">False</property>
+                                    <property name="fill">False</property>
+                                    <property name="padding">5</property>
+                                    <property name="position">2</property>
+                                  </packing>
                                 </child>
                               </object>
-                            </child>
-                            <child type="label">
-                              <object class="GtkLabel" id="customPlacesFrameLabel">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="label" translatable="yes">Custom Places:</property>
-                                <property name="use_markup">True</property>
-                              </object>
+                              <packing>
+                                <property name="expand">False</property>
+                                <property name="fill">False</property>
+                                <property name="padding">6</property>
+                                <property name="position">1</property>
+                              </packing>
                             </child>
                           </object>
-                          <packing>
-                            <property name="expand">True</property>
-                            <property name="fill">True</property>
-                            <property name="position">5</property>
-                          </packing>
+                        </child>
+                        <child type="label">
+                          <object class="GtkLabel" id="customPlacesFrameLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Custom Places:</property>
+                            <property name="use_markup">True</property>
+                          </object>
                         </child>
                       </object>
+                      <packing>
+                        <property name="expand">True</property>
+                        <property name="fill">True</property>
+                        <property name="position">5</property>
+                      </packing>
                     </child>
                   </object>
                 </child>
-                <child type="label">
-                  <object class="GtkLabel" id="label6">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xpad">1</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                </child>
               </object>
+              <packing>
+                <property name="position">5</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="placesLabel">
@@ -2037,7 +1856,7 @@
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
@@ -2050,7 +1869,6 @@
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
               </object>
               <packing>

From acf692a95eabdead0bb65a03de28e821753d3fea Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Tue, 6 Sep 2016 21:45:42 +0100
Subject: [PATCH 4/7] glade part #3

---
 usr/lib/linuxmint/mintMenu/mintMenuConfig.glade | 847 ++++++++++++------------
 1 file changed, 415 insertions(+), 432 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
index f1522d7..75f6565 100644
--- a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
+++ b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
@@ -80,7 +80,6 @@
                 <property name="can_focus">True</property>
                 <property name="can_default">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_action_appearance">False</property>
                 <property name="use_stock">True</property>
               </object>
               <packing>
@@ -308,137 +307,118 @@
             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
             <property name="border_width">4</property>
             <child>
-              <object class="GtkFrame" id="frame18">
+              <object class="GtkFrame" id="frame1">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkAlignment" id="alignment8">
+                  <object class="GtkGrid" id="main_grid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="top_padding">10</property>
-                    <property name="left_padding">10</property>
+                    <property name="margin_top">10</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="row_spacing">5</property>
+                    <property name="column_spacing">5</property>
+                    <child>
+                      <object class="GtkCheckButton" id="showButtonIcon">
+                        <property name="label" translatable="yes">Show button icon</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
+                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="halign">start</property>
+                        <property name="draw_indicator">True</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                        <property name="width">2</property>
+                      </packing>
+                    </child>
                     <child>
-                      <object class="GtkTable" id="main_table">
+                      <object class="GtkLabel" id="buttonTextLabel">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="n_rows">4</property>
-                        <property name="n_columns">2</property>
-                        <property name="column_spacing">5</property>
-                        <property name="row_spacing">5</property>
-                        <child>
-                          <object class="GtkCheckButton" id="showButtonIcon">
-                            <property name="label" translatable="yes">Show button icon</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="use_action_appearance">False</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="right_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
-                            <property name="y_options"/>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="buttonTextLabel">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Button text:</property>
-                          </object>
-                          <packing>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
-                            <property name="y_options"/>
-                          </packing>
-                        </child>
-                        <child>
-                          <placeholder/>
-                        </child>
+                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="halign">start</property>
+                        <property name="label" translatable="yes">Button text:</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkEntry" id="buttonText">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                        <property name="invisible_char">●</property>
+                        <property name="primary_icon_activatable">False</property>
+                        <property name="secondary_icon_activatable">False</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label4">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="halign">start</property>
+                        <property name="label" translatable="yes">Button icon:</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">3</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkBox" id="hbox4">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="spacing">7</property>
                         <child>
-                          <object class="GtkLabel" id="label4">
+                          <object class="GtkFileChooserButton" id="button_icon_chooser">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Button icon:</property>
-                          </object>
-                          <packing>
-                            <property name="top_attach">3</property>
-                            <property name="bottom_attach">4</property>
-                            <property name="x_options">GTK_FILL</property>
-                            <property name="y_options"/>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="buttonText">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="invisible_char">&#x25CF;</property>
-                            <property name="primary_icon_activatable">False</property>
-                            <property name="secondary_icon_activatable">False</property>
-                            <property name="primary_icon_sensitive">True</property>
-                            <property name="secondary_icon_sensitive">True</property>
                           </object>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
-                            <property name="y_options"/>
+                            <property name="expand">True</property>
+                            <property name="fill">True</property>
+                            <property name="position">0</property>
                           </packing>
                         </child>
                         <child>
-                          <placeholder/>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox4">
+                          <object class="GtkImage" id="image_button_icon">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="spacing">7</property>
-                            <child>
-                              <object class="GtkFileChooserButton" id="button_icon_chooser">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkImage" id="image_button_icon">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="stock">gtk-missing-image</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="stock">gtk-missing-image</property>>
                           </object>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">3</property>
-                            <property name="bottom_attach">4</property>
-                            <property name="x_options">GTK_FILL</property>
-                            <property name="y_options"/>
+                            <property name="expand">True</property>
+                            <property name="fill">True</property>
+                            <property name="position">1</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">3</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
                     </child>
                   </object>
                 </child>
@@ -456,175 +436,209 @@
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="hbox10">
+              <object class="GtkFrame" id="frame6">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="border_width">6</property>
-                <property name="spacing">3</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
+                <property name="label_xalign">0</property>
+                <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkHBox" id="hbox11">
+                  <object class="GtkBox" id="hbox11">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
                     <property name="spacing">5</property>
                     <child>
-                      <object class="GtkAlignment" id="alignment38">
+                      <object class="GtkBox" id="vbox7">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="top_padding">10</property>
+                        <property name="margin_top">10</property>
+                        <property name="orientation">vertical</property>
+                        <property name="spacing">5</property>
+                        <child>
+                          <object class="GtkCheckButton" id="startWithFavorites">
+                            <property name="label" translatable="yes">Always start with favorites pane</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="showApplicationsPlugin">
+                            <property name="label" translatable="yes">Show applications plugin</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="use_underline">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">1</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="showSystemPlugin">
+                            <property name="label" translatable="yes">Show system plugin</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="showPlacesPlugin">
+                            <property name="label" translatable="yes">Show places plugin</property>>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">3</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="showRecentPlugin">
+                            <property name="label" translatable="yes">Show recent documents plugin</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">4</property>
+                          </packing>
+                        </child>
                         <child>
-                          <object class="GtkVBox" id="vbox7">
+                          <object class="GtkGrid" id="table2">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="spacing">5</property>
+                            <property name="row_spacing">8</property>
+                            <property name="column_spacing">3</property>
                             <child>
-                              <object class="GtkCheckButton" id="startWithFavorites">
-                                <property name="label" translatable="yes">Always start with favorites pane</property>
+                              <object class="GtkLabel" id="label11">
                                 <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="draw_indicator">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="halign">start</property>
+                                <property name="label" translatable="yes">Border width:</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
+                                <property name="left_attach">0</property>
+                                <property name="top_attach">0</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkCheckButton" id="showApplicationsPlugin">
-                                <property name="label" translatable="yes">Show applications plugin</property>
+                              <object class="GtkSpinButton" id="borderWidth">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="use_underline">True</property>
-                                <property name="draw_indicator">True</property>
+                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                                <property name="invisible_char">●</property>
+                                <property name="primary_icon_activatable">False</property>
+                                <property name="secondary_icon_activatable">False</property>
+                                <property name="adjustment">adjustment1</property>
+                                <property name="climb_rate">1</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
+                                <property name="left_attach">1</property>
+                                <property name="top_attach">0</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkCheckButton" id="showSystemPlugin">
-                                <property name="label" translatable="yes">Show system plugin</property>
+                              <object class="GtkLabel" id="label25">
                                 <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="draw_indicator">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="halign">start</property>
+                                <property name="margin_left">5</property>
+                                <property name="label" translatable="yes">px</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">2</property>
+                                <property name="left_attach">2</property>
+                                <property name="top_attach">0</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkCheckButton" id="showPlacesPlugin">
-                                <property name="label" translatable="yes">Show places plugin</property>
+                              <object class="GtkLabel" id="label8">
                                 <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="draw_indicator">True</property>
+                                <property name="can_focus">False</property>
+                                <property name="halign">start</property>
+                                <property name="label" translatable="yes">Opacity:</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">3</property>
+                                <property name="left_attach">0</property>
+                                <property name="top_attach">1</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkCheckButton" id="showRecentPlugin">
-                                <property name="label" translatable="yes">Show recent documents plugin</property>
+                              <object class="GtkSpinButton" id="opacity">
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
                                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="use_action_appearance">False</property>
-                                <property name="draw_indicator">True</property>
+                                <property name="invisible_char">●</property>
+                                <property name="primary_icon_activatable">False</property>
+                                <property name="secondary_icon_activatable">False</property>
+                                <property name="adjustment">adjustment2</property>
+                                <property name="climb_rate">1</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">4</property>
+                                <property name="left_attach">1</property>
+                                <property name="top_attach">1</property>
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkTable" id="table2">
+                              <object class="GtkLabel" id="label9">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
-                                <property name="n_rows">2</property>
-                                <property name="n_columns">3</property>
-                                <property name="row_spacing">8</property>
-                                <child>
-                                  <object class="GtkLabel" id="label11">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="xalign">0</property>
-                                    <property name="label" translatable="yes">Border width:</property>
-                                  </object>
-                                </child>
-                                <child>
-                                  <object class="GtkSpinButton" id="borderWidth">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <property name="invisible_char">&#x25CF;</property>
-                                    <property name="primary_icon_activatable">False</property>
-                                    <property name="secondary_icon_activatable">False</property>
-                                    <property name="primary_icon_sensitive">True</property>
-                                    <property name="secondary_icon_sensitive">True</property>
-                                    <property name="adjustment">adjustment1</property>
-                                    <property name="climb_rate">1</property>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">1</property>
-                                    <property name="right_attach">2</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkLabel" id="label25">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="label" translatable="yes">px</property>
-                                  </object>
-                                  <packing>
-                                    <property name="left_attach">2</property>
-                                    <property name="right_attach">3</property>
-                                  </packing>
-                                </child>
+                                <property name="halign">start</property>
+                                <property name="margin_left">5</property>
+                                <property name="label" translatable="yes">%</property>
                               </object>
                               <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">True</property>
-                                <property name="position">5</property>
+                                <property name="left_attach">2</property>
+                                <property name="top_attach">1</property>
                               </packing>
                             </child>
                           </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">True</property>
+                            <property name="position">5</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">True</property>
+                        <property name="expand">False</property>
                         <property name="fill">True</property>
                         <property name="position">0</property>
                       </packing>
                     </child>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">True</property>
-                    <property name="padding">6</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
               </object>
+              <packing>
+                <property name="position">1</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="pluginsLabel">
@@ -1553,102 +1567,143 @@
               </packing>
             </child>
             <child>
-              <object class="GtkFrame" id="frame4">
+              <object class="GtkFrame" id="frame11">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
+                <property name="margin_left">10</property>
+                <property name="margin_right">10</property>
+                <property name="margin_top">10</property>
+                <property name="margin_bottom">10</property>
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkAlignment" id="alignment4">
+                  <object class="GtkBox" id="vbox5">>
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="left_padding">12</property>
+                    <property name="orientation">vertical</property>
+                    <child>
+                      <object class="GtkCheckButton" id="allowscrollbarcheckbutton1">
+                        <property name="label" translatable="yes">Allow Scrollbar</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
+                        <property name="margin_top">10</property>
+                        <property name="draw_indicator">True</property>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
                     <child>
-                      <object class="GtkVBox" id="vbox5">
+                      <object class="GtkBox" id="hbox3">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
+                        <property name="margin_left">5</property>
+                        <property name="margin_bottom">3</property>
+                        <property name="spacing">4</property>
                         <child>
-                          <object class="GtkCheckButton" id="allowscrollbarcheckbutton1">
-                            <property name="label" translatable="yes">Allow Scrollbar</property>
+                          <object class="GtkLabel" id="systemHeightEntryLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Height:</property>
+                            <property name="use_markup">True</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">True</property>
+                            <property name="position">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkSpinButton" id="systemHeightSpinButton">
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="use_action_appearance">False</property>
-                            <property name="draw_indicator">True</property>
+                            <property name="max_length">5</property>
+                            <property name="invisible_char">●</property>
+                            <property name="caps_lock_warning">False</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                            <property name="adjustment">adjustment9</property>
+                            <property name="numeric">True</property>
                           </object>
                           <packing>
                             <property name="expand">False</property>
                             <property name="fill">False</property>
-                            <property name="position">0</property>
+                            <property name="position">2</property>
                           </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">True</property>
+                        <property name="position">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkBox" id="hbox6">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="border_width">4</property>
+                        <property name="spacing">4</property>
                         <child>
-                          <object class="GtkAlignment" id="alignment6">
+                          <object class="GtkLabel" id="systemIconSizeLabel">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="bottom_padding">3</property>
-                            <property name="left_padding">5</property>
-                            <child>
-                              <object class="GtkHBox" id="hbox3">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="spacing">4</property>
-                                <child>
-                                  <object class="GtkLabel" id="systemHeightEntryLabel">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <property name="label" translatable="yes">Height:</property>
-                                    <property name="use_markup">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">True</property>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkSpinButton" id="systemHeightSpinButton">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="max_length">5</property>
-                                    <property name="invisible_char">&#x25CF;</property>
-                                    <property name="caps_lock_warning">False</property>
-                                    <property name="primary_icon_activatable">False</property>
-                                    <property name="secondary_icon_activatable">False</property>
-                                    <property name="primary_icon_sensitive">True</property>
-                                    <property name="secondary_icon_sensitive">True</property>
-                                    <property name="adjustment">adjustment9</property>
-                                    <property name="numeric">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">2</property>
-                                  </packing>
-                                </child>
-                              </object>
-                            </child>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="halign">start</property>
+                            <property name="label" translatable="yes">Icon size:</property>
                           </object>
                           <packing>
                             <property name="expand">False</property>
-                            <property name="fill">True</property>
-                            <property name="padding">4</property>
+                            <property name="fill">False</property>
+                            <property name="position">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkSpinButton" id="systemIconSize">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                            <property name="invisible_char">●</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                            <property name="adjustment">adjustment10</property>
+                          </object>
+                          <packing>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
                             <property name="position">1</property>
                           </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">2</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkFrame" id="frame5">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label_xalign">0</property>
+                        <property name="shadow_type">none</property>
                         <child>
-                          <object class="GtkHBox" id="hbox6">
+                          <object class="GtkBox" id="vbox6">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="border_width">4</property>
-                            <property name="spacing">4</property>
+                            <property name="margin_left">14</property>
+                            <property name="margin_bottom">10</property>
+                            <property name="orientation">vertical</property>
                             <child>
-                              <object class="GtkLabel" id="systemIconSizeLabel">
+                              <object class="GtkCheckButton" id="softwaremanagercheckbutton">
+                                <property name="label" translatable="yes">Software Manager</property>
                                 <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Icon size:</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
                               </object>
                               <packing>
                                 <property name="expand">False</property>
@@ -1657,16 +1712,12 @@
                               </packing>
                             </child>
                             <child>
-                              <object class="GtkSpinButton" id="systemIconSize">
+                              <object class="GtkCheckButton" id="packagemanagercheckbutton">
+                                <property name="label" translatable="yes">Package Manager</property>
                                 <property name="visible">True</property>
                                 <property name="can_focus">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="invisible_char">&#x25CF;</property>
-                                <property name="primary_icon_activatable">False</property>
-                                <property name="secondary_icon_activatable">False</property>
-                                <property name="primary_icon_sensitive">True</property>
-                                <property name="secondary_icon_sensitive">True</property>
-                                <property name="adjustment">adjustment10</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
                               </object>
                               <packing>
                                 <property name="expand">False</property>
@@ -1674,168 +1725,100 @@
                                 <property name="position">1</property>
                               </packing>
                             </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkFrame" id="frame5">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="label_xalign">0</property>
-                            <property name="shadow_type">none</property>
                             <child>
-                              <object class="GtkAlignment" id="alignment7">
+                              <object class="GtkCheckButton" id="controlcentercheckbutton">
+                                <property name="label" translatable="yes">Control Center</property>
                                 <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="top_padding">2</property>
-                                <property name="bottom_padding">10</property>
-                                <property name="left_padding">14</property>
-                                <child>
-                                  <object class="GtkVBox" id="vbox6">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">False</property>
-                                    <child>
-                                      <object class="GtkCheckButton" id="softwaremanagercheckbutton">
-                                        <property name="label" translatable="yes">Software Manager</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">False</property>
-                                        <property name="fill">False</property>
-                                        <property name="position">0</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="packagemanagercheckbutton">
-                                        <property name="label" translatable="yes">Package Manager</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">False</property>
-                                        <property name="fill">False</property>
-                                        <property name="position">1</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="controlcentercheckbutton">
-                                        <property name="label" translatable="yes">Control Center</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">2</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="terminalcheckbutton">
-                                        <property name="label" translatable="yes">Terminal</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="relief">none</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">3</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="lockcheckbutton">
-                                        <property name="label" translatable="yes">Lock Screen</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="yalign">0.54000002145767212</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">4</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="logoutcheckbutton">
-                                        <property name="label" translatable="yes">Logout</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">5</property>
-                                      </packing>
-                                    </child>
-                                    <child>
-                                      <object class="GtkCheckButton" id="quitcheckbutton">
-                                        <property name="label" translatable="yes">Quit</property>
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">True</property>
-                                        <property name="receives_default">False</property>
-                                        <property name="use_action_appearance">False</property>
-                                        <property name="draw_indicator">True</property>
-                                      </object>
-                                      <packing>
-                                        <property name="expand">True</property>
-                                        <property name="fill">True</property>
-                                        <property name="position">6</property>
-                                      </packing>
-                                    </child>
-                                  </object>
-                                </child>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">2</property>
+                              </packing>
+                            </child>
+                            <child>
+                              <object class="GtkCheckButton" id="terminalcheckbutton">
+                                <property name="label" translatable="yes">Terminal</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="relief">none</property>
+                                <property name="draw_indicator">True</property>
                               </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">3</property>
+                              </packing>
                             </child>
-                            <child type="label">
-                              <object class="GtkLabel" id="defaultItemsFrameLabel">
+                            <child>
+                              <object class="GtkCheckButton" id="lockcheckbutton">
+                                <property name="label" translatable="yes">Lock Screen</property>
                                 <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0.56000000238418579</property>
-                                <property name="label" translatable="yes">Toggle Default Items:</property>
-                                <property name="use_markup">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
                               </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">4</property>
+                              </packing>
+                            </child>
+                            <child>
+                              <object class="GtkCheckButton" id="logoutcheckbutton">
+                                <property name="label" translatable="yes">Logout</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">5</property>
+                              </packing>
+                            </child>
+                            <child>
+                              <object class="GtkCheckButton" id="quitcheckbutton">
+                                <property name="label" translatable="yes">Quit</property>
+                                <property name="visible">True</property>
+                                <property name="can_focus">True</property>
+                                <property name="receives_default">False</property>
+                                <property name="draw_indicator">True</property>
+                              </object>
+                              <packing>
+                                <property name="expand">True</property>
+                                <property name="fill">True</property>
+                                <property name="position">6</property>
+                              </packing>
                             </child>
                           </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">True</property>
-                            <property name="position">3</property>
-                          </packing>
+                        </child>
+                        <child type="label">
+                          <object class="GtkLabel" id="defaultItemsFrameLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Toggle Default Items:</property>
+                            <property name="use_markup">True</property>
+                          </object>
                         </child>
                       </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">True</property>
+                        <property name="position">3</property>
+                      </packing>
                     </child>
                   </object>
                 </child>
-                <child type="label">
-                  <object class="GtkLabel" id="label7">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                  </object>
-                </child>
               </object>
+              <packing>
+                <property name="position">6</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="systemLabel">

From a1d5e35535b3539b3a85b871a70a4a72b35ad2ed Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Tue, 6 Sep 2016 22:07:46 +0100
Subject: [PATCH 5/7] fix errors

---
 usr/lib/linuxmint/mintMenu/mintMenu.py             | 2 +-
 usr/lib/linuxmint/mintMenu/plugins/applications.py | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenu.py b/usr/lib/linuxmint/mintMenu/mintMenu.py
index a0d41c4..acce03a 100755
--- a/usr/lib/linuxmint/mintMenu/mintMenu.py
+++ b/usr/lib/linuxmint/mintMenu/mintMenu.py
@@ -356,7 +356,7 @@ def PopulatePlugins( self ):
 
         self.paneholder.pack_start( ImageBox, False, False, 0 )
         self.paneholder.pack_start( PluginPane, False, False, 0 )
-        self.tooltipsEnable( False ))
+        self.tooltipsEnable( False )
 
     def loadTheme( self ):
         self.SetPaneColors( self.panesToColor )
diff --git a/usr/lib/linuxmint/mintMenu/plugins/applications.py b/usr/lib/linuxmint/mintMenu/plugins/applications.py
index 4040da5..9c55932 100755
--- a/usr/lib/linuxmint/mintMenu/plugins/applications.py
+++ b/usr/lib/linuxmint/mintMenu/plugins/applications.py
@@ -1397,7 +1397,7 @@ def buildFavorites( self ):
                     self.favorites.append( favButton )
                     self.favoritesPositionOnGrid( favButton )
                     favButton.connect( "drag-data-received", self.onFavButtonDragReorder )
-                    favButton.drag_dest_set( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toFav, Gdk.DragAction.COPY 
+                    favButton.drag_dest_set( Gtk.DestDefaults.MOTION | Gtk.DestDefaults.HIGHLIGHT | Gtk.DestDefaults.DROP, self.toFav, Gdk.DragAction.COPY )
                     favButton.connect( "drag-data-get", self.onFavButtonDragReorderGet )
                     favButton.drag_source_set ( Gdk.ModifierType.BUTTON1_MASK, self.toFav, Gdk.DragAction.COPY )
                     position += 1

From 4d9de57f27f0327b9032df0ccc6f2c44c9b380e0 Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Wed, 7 Sep 2016 00:40:16 +0100
Subject: [PATCH 6/7] fix some glade typos

---
 usr/lib/linuxmint/mintMenu/mintMenuConfig.glade | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
index 75f6565..2a67b5d 100644
--- a/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
+++ b/usr/lib/linuxmint/mintMenu/mintMenuConfig.glade
@@ -400,7 +400,7 @@
                           <object class="GtkImage" id="image_button_icon">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="stock">gtk-missing-image</property>>
+                            <property name="stock">gtk-missing-image</property>
                           </object>
                           <packing>
                             <property name="expand">True</property>
@@ -503,7 +503,7 @@
                         </child>
                         <child>
                           <object class="GtkCheckButton" id="showPlacesPlugin">
-                            <property name="label" translatable="yes">Show places plugin</property>>
+                            <property name="label" translatable="yes">Show places plugin</property>
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
                             <property name="receives_default">False</property>
@@ -1577,7 +1577,7 @@
                 <property name="label_xalign">0</property>
                 <property name="shadow_type">none</property>
                 <child>
-                  <object class="GtkBox" id="vbox5">>
+                  <object class="GtkBox" id="vbox5">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
                     <property name="orientation">vertical</property>

From daac10823f105255dc08dc96304b61ea94d5f667 Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Wed, 7 Sep 2016 09:40:38 +0100
Subject: [PATCH 7/7] fix border colour

---
 usr/lib/linuxmint/mintMenu/mintMenu.py | 51 +++++++++++++++++++++-------------
 1 file changed, 31 insertions(+), 20 deletions(-)

diff --git a/usr/lib/linuxmint/mintMenu/mintMenu.py b/usr/lib/linuxmint/mintMenu/mintMenu.py
index acce03a..1ebbd35 100755
--- a/usr/lib/linuxmint/mintMenu/mintMenu.py
+++ b/usr/lib/linuxmint/mintMenu/mintMenu.py
@@ -177,18 +177,15 @@ def getSetGSettingEntries( self ):
 
         self.globalEnableTooltips = self.panelSettings.get_boolean( "tooltips-enabled" )
 
-    def SetupMintMenuBorder( self ):
+    def SetupMintMenuBorder( self, color = None ):
         context = self.window.get_style_context()
-        context.save()
-        context.set_state( Gtk.StateFlags.NORMAL )
         if self.usecustomcolor:
-            bg_color = Gdk.RGBA()
-            bg_color.parse( self.custombordercolor ) 
-            self.window.override_background_color( Gtk.StateFlags.NORMAL, bg_color )
-        else:
-            self.window.override_background_color( Gtk.StateFlags.NORMAL, None )
+            borderColor = Gdk.RGBA()
+            borderColor.parse( self.custombordercolor )
+            self.window.override_background_color( context.get_state(), borderColor )
+        elif color is not None:
+            self.window.override_background_color( context.get_state(), color )
         self.border.set_padding( self.borderwidth, self.borderwidth, self.borderwidth, self.borderwidth )
-        context.restore()
 
     def detect_desktop_environment (self):
         self.de = "mate"
@@ -358,23 +355,37 @@ def PopulatePlugins( self ):
         self.paneholder.pack_start( PluginPane, False, False, 0 )
         self.tooltipsEnable( False )
 
+    # A little bit hacky but works.
+    def getDefaultColors( self ):
+        widget = Gtk.EventBox()
+        widget.show()
+
+        context = widget.get_style_context()
+        context.set_state( Gtk.StateFlags.NORMAL )
+        context.add_class( Gtk.STYLE_CLASS_DEFAULT )
+        context.add_class( Gtk.STYLE_CLASS_BACKGROUND )
+
+        fgColor = context.get_color( context.get_state() )
+        bgColor = context.get_background_color( context.get_state() )
+        borderColor = context.get_border_color( context.get_state() )
+
+        return { "fg": fgColor, "bg": bgColor, "border": borderColor }
+
     def loadTheme( self ):
-        self.SetPaneColors( self.panesToColor )
-        self.SetupMintMenuBorder()
+        colors = self.getDefaultColors()
+        self.SetPaneColors( self.panesToColor, colors["bg"] )
+        self.SetupMintMenuBorder( colors["border"] )
         self.SetHeadingStyle( self.headingsToColor )
 
-    def SetPaneColors( self, items ):
+    def SetPaneColors( self, items, color = None ):
         for item in items:
             context = item.get_style_context()
-            context.save()
-            context.set_state( Gtk.StateFlags.NORMAL )
             if self.usecustomcolor:
-                bg_color = Gdk.RGBA()
-                bg_color.parse( self.customcolor )
-                item.override_background_color( Gtk.StateFlags.NORMAL, bg_color )
-            else:
-                item.override_background_color( Gtk.StateFlags.NORMAL, None )
-            context.restore()
+                bgColor = Gdk.RGBA()
+                bgColor.parse( self.customcolor )
+                item.override_background_color( context.get_state(), bgColor )
+            elif color is not None:
+                item.override_background_color( context.get_state(), color )
 
     def SetHeadingStyle( self, items ):
         if self.usecustomcolor:
